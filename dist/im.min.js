!function(s){!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).imjs=t()}}(function(){return function o(s,a,u){function h(e,t){if(!a[e]){if(!s[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(l)return l(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=a[e]={exports:{}};s[e][0].call(i.exports,function(t){return h(s[e][1][t]||t)},i,i.exports,o,s,a,u)}return a[e].exports}for(var l="function"==typeof require&&require,t=0;t<u.length;t++)h(u[t]);return h}({1:[function(t,e,r){(function(){r.ACCEPT_HEADER={xml:"application/xml",json:"application/json",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",csv:"text/comma-separated-values",fasta:"text/x-fasta",gff3:"text/x-gff3",bed:"text/x-bed",objects:"application/json;type=objects",jsonobjects:"application/json;type=objects",jsontable:"application/json;type=table",jsonrows:"application/json;type=rows",jsoncount:"application/json;type=count",jsonp:"application/javascript",jsonpobjects:"application/javascript;type=objects",jsonptable:"application/javascript;type=table",jsonprows:"application/javascript;type=rows",jsonpcount:"application/javascript;type=count"}}).call(this)},{}],2:[function(i,o,t){(function(n){(function(){var t,e,r;i("./shiv"),o.exports=e=i("./service"),r=e.utils.merge,(t=function(t,e){return n[t]=e})("imjs",e),t("intermine",void 0===s?e:r(s,e))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./service":11,"./shiv":13}],3:[function(r,t,n){(function(){var h,o,l,c,t,f,p,d,y,g,v,m,e,b,w,_;l=r("url"),o=r("JSONStream"),g=r("http"),h=r("./constants").ACCEPT_HEADER,t=r("./version").VERSION,e=_=r("./util"),d=e.error,p=e.defer,v=e.merge,e.invoke,c="node-http/imjs-"+t,n.supports=function(){return!0},w=function(t,n,i){return function(t){var e,r;return null==t.pipe?i(new Error("response is not a stream")):(t.on("error",i),null!=t.statusCode&&200!==t.statusCode?((e=o.parse("error")).pause(),t.pipe(e),i([t.statusCode,e])):((r=o.parse("results.*")).pause(),t.pipe(r),n(r)))}},y=function(t,e,r,n){return"Could not parse response to "+t.type+" "+t.url+': "'+e+'" ('+n+": "+r+")"},f=function(u,h,l){return function(s){var a;return a="",s.on("data",function(t){return a+=t}),s.on("error",l),s.on("end",function(){var t,e,r,n,i,o;if(null!=(null!=s?s.headers:void 0)&&(t=s.headers["content-type"]),"application/json"!==t&&!/json/.test(u.dataType)&&!/json/.test(u.data.format))return(n=a.match(/\[ERROR\] (\d+)([\s\S]*)/))?l(new Error(n[2])):(200<=(o=s.statusCode)&&o<400?h:l)(a);if(""===a&&200===s.statusCode)return h();try{return(r=(i=JSON.parse(a)).error)?l(new Error(r)):h(i)}catch(t){return e=t,400<=s.statusCode?l(new Error(s.statusCode)):l(new Error(y(u,a,e,s.statusCode)))}})}},n.iterReq=function(l,c,f){return function(t,e,r,n,i){var o,s,a,u,h;return null==e&&(e={}),null==r&&(r=function(){}),null==n&&(n=function(){}),null==i&&(i=function(){}),_.isFunction(e)&&(e=(u=[{},e,r,n])[0],r=u[1],n=u[2],i=u[3]),h=v({format:f},e,{query:t.toXML()}),o=function(t){return t.on("data",r),t.on("error",n),t.on("end",i),setTimeout(function(){if(null!=t.resume)return t.resume()},3),t},a=function(t){var e,r;return r=t[0],(e=t[1]).on("data",n),e.on("error",n),e.on("end",i),null!=e.resume&&e.resume(),d(r)},(s=this.makeRequest(l,c,h,null,!0)).then(o,a),s}},b=function(t,e,r){var n;return n=setTimeout(function(){return e("Request timed out.")},t),r.then(function(){return cancelTimeout(n)})},m=function(t){var e,r,n,i,o,s,a,u;if(!t.url)throw new Error("No url provided in "+JSON.stringify(t));if("string"==typeof t.data){if(n=t.data,"GET"===(i=t.type)||"DELETE"===i)throw new Error("Invalid request. "+t.type+" requests must not have bodies")}else n=_.querystring(t.data);if((r=l.parse(t.url,!0)).withCredentials=!1,r.method=t.type||"GET",null!=t.port&&(r.port=t.port),r.headers={"User-Agent":c,Accept:h[t.dataType]},("GET"===(o=r.method)||"DELETE"===o)&&(null!=n?n.length:void 0)?(a=/\?/.test(r.path)?"&":"?",r.path+=a+n,n=null):(r.headers["Content-Type"]=(t.contentType||"application/x-www-form-urlencoded")+"; charset=UTF-8",r.headers["Content-Length"]=n.length),null!=t.headers)for(e in s=t.headers)u=s[e],r.headers[e]=u;return null!=t.auth&&(r.auth=t.auth),[r,n]},n.doReq=function(e,t){var r,n,i,o,s,a,u,h,l,c;i=(o=p()).promise,h=o.resolve,a=o.reject,i.then(null,e.error);try{s=m(e),c=s[0],n=s[1],r=(t?w:f)(e,h,a),(u=g.request(c,r)).on("error",function(t){return a(new Error("Error: "+c.method+" "+e.url+": "+t))}),null!=n&&u.write(n),u.end(),0<(l=e.timeout)&&b(l,a,i)}catch(t){a(t)}return i}}).call(this)},{"./constants":1,"./util":16,"./version":17,JSONStream:19,http:55,url:63}],4:[function(g,t,v){(function(){var n,r,i,e,c,o,s,t,a,u,h,l,f,p={}.hasOwnProperty,d=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},y=function(t,e){return function(){return t.apply(e,arguments)}};t=g("./util"),h=v,l=t.uniqBy,o=t.difference,c=t.defer,f=t.withCB,u=t.id,a=t.get,s=t.fold,e=t.concatMap,n=function(){var r;function t(t){var e,r;for(e in t)p.call(t,e)&&(r=t[e],this[e]=r)}return t.prototype.getStats=function(t){return null!=t?this.stats[t]:this.stats},r=e(a("matches")),t.prototype.getMatches=function(t){var e;return"MATCH"===t?this.matches[t]:null!=(e=r(this.matches[t]))?e:[]},t.prototype.getMatchIds=function(t){return null!=t?this.getMatches(t).map(a("id")):this.allMatchIds()},t.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},t.prototype.allMatchIds=function(){var r;return s((r=this,function(t,e){return t.concat(r.getMatchIds(e))}))(this.goodMatchIds(),["DUPLICATE","WILDCARD","TYPE_CONVERTED","OTHER"])},t}(),i=function(){var s,r,n,a;function t(t){var e,r;for(e in t)p.call(t,e)&&(r=t[e],this[e]=r)}return a=l(u),s=e(u),r=function(r){var n,i;return s(function(){var t,e;for(n in e=[],t=r.identifiers)i=t[n],e.push(i);return e}())},n=function(t,e){return null==e||0<=d.call(r(t),e)},t.prototype.getStats=function(t){switch(t){case"objects":return this.getObjectStats();case"identifiers":return this.getIdentifierStats();default:return{objects:this.getObjectStats(),identifiers:this.getIdentifierStats()}}},t.prototype.getIdentifierStats=function(){var t,e,r;return e=(r=function(n){var i,o;return a(s(function(){var t,e,r;for(r=[],t=0,e=n.length;t<e;t++)o=n[t],r.push(function(){var t;for(i in t=[],null!=o?o.identifiers:void 0)t.push(i);return t}());return r}()))})(this.getMatches("MATCH")),t=r(this.getMatches()),{matches:e.length,all:t.length,issues:o(t,e).length}},t.prototype.getObjectStats=function(){var e;return{matches:this.goodMatchIds().length,all:this.allMatchIds().length,issues:function(){var t;for(u in t=[],this)p.call(this,u)&&(e=this[u],d.call(r(e),"MATCH")<0&&t.push(u));return t}.call(this).length}},t.prototype.getMatches=function(t){var e,r;for(u in r=[],this)p.call(this,u)&&(e=this[u],n(e,t)&&r.push(e));return r},t.prototype.getMatchIds=function(t){var e,r;for(u in r=[],this)p.call(this,u)&&(e=this[u],n(e,t)&&r.push(u));return r},t.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},t.prototype.allMatchIds=function(){return this.getMatchIds()},t}(),(r=function(){function t(t,e){this.uid=t,this.service=e,this.del=y(this.del,this),this.fetchResults=y(this.fetchResults,this),this.fetchErrorMessage=y(this.fetchErrorMessage,this),this.fetchStatus=y(this.fetchStatus,this)}return t.prototype.fetchStatus=function(t){return f(t,this.service.get("ids/"+this.uid+"/status").then(a("status")))},t.prototype.fetchErrorMessage=function(t){return f(t,this.service.get("ids/"+this.uid+"/status").then(a("message")))},t.prototype.fetchResults=function(t){var r;return r=this.service.get("ids/"+this.uid+"/result").then(a("results")),this.service.fetchVersion().then(function(e){return r.then(function(t){return 16<=e?new n(t):new i(t)})})},t.prototype.del=function(t){return f(t,this.service.makeRequest("DELETE","ids/"+this.uid))},t.prototype.decay=50,t.prototype.poll=function(t,e,r){var n,i,o,s,a,u,h,l;return o=(s=c()).promise,u=s.resolve,a=s.reject,o.then(t,e),i=null!=r?r:function(){},(h=this.fetchStatus()).then(null,a),n=this.decay,this.decay=Math.min(6e4,1.25*n),h.then((l=this,function(t){switch(i(t),t){case"SUCCESS":return l.fetchResults().then(u,a);case"ERROR":return l.fetchErrorMessage().then(a,a);default:return setTimeout(function(){return l.poll(u,a,i)},n)}})),o},t}()).prototype.wait=r.prototype.poll,r.create=function(e){return function(t){return new r(t,e)}},h.IDResolutionJob=r,h.CategoryResults=n,h.IdResults=i}).call(this)},{"./util":16}],5:[function(n,t,h){(function(){var t,e,l,i,r,c,o,s,f,p,a=function(t,e){return function(){return t.apply(e,arguments)}},u={}.hasOwnProperty,d=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};f=n("./util"),r=h,s=f.merge,p=f.withCB,l=f.get,c=f.invoke,f.REQUIRES_VERSION,f.set,e=f.dejoin,o=function(t){return"__folder__"===t.substr(0,t.indexOf(":"))},i=function(t){return t.substr(t.indexOf(":")+1)},t=function(){var n;function t(t,e){var r,n;for(r in this.service=e,this._updateTags=a(this._updateTags,this),this.hasTag=a(this.hasTag,this),t)u.call(t,r)&&(n=t[r],this[r]=n);this.dateCreated=null!=this.dateCreated?new Date(this.dateCreated):null,this.folders=this.tags.filter(o).map(i)}return t.prototype.hasTag=function(t){return 0<=d.call(this.tags,t)},t.prototype.query=function(t){return null==t&&(t=["*"]),this.service.query({select:t,from:this.type,where:[[this.type,"IN",this.name]]})},t.prototype.del=function(t){return this.service.makeRequest("DELETE","lists",{name:this.name},t)},n=function(t){return t.tags},t.prototype._updateTags=function(t,e){if(null==t)return this.tags=e.slice(),this.folders=this.tags.filter(o).map(i)},t.prototype.fetchTags=function(t){return p(this._updateTags,t,this.service.makeRequest("GET","list/tags",{name:this.name}).then(n))},t.prototype.addTags=function(t,e){var r;return r={name:this.name,tags:t},p(this._updateTags,e,this.service.makeRequest("POST","list/tags",r).then(n))},t.prototype.removeTags=function(t,e){var r;return r={name:this.name,tags:t},p(this._updateTags,e,this.service.makeRequest("DELETE","list/tags",r).then(n))},t.prototype.contents=function(t){return p(t,this.query().then(e).then(c("records")))},t.prototype.rename=function(t,e){var r,n;return r=this.service.post("lists/rename",{oldname:this.name,newname:t}).then(l("listName")).then((n=this,function(t){return n.name=t})).then(this.service.fetchList),p(e,r)},t.prototype.copy=function(t,e){var r,n,i,o,s,a,u,h;return null==t&&(t={}),null==e&&(e=function(){}),1===arguments.length&&f.isFunction(t)&&(t=(o=[{},t])[0],e=o[1]),"string"==typeof t&&(t={name:t}),n=r=null!=(s=t.name)?s:this.name+"_copy",u=this.tags.concat(null!=(a=t.tags)?a:[]),i=this.query(["id"]),p(e,this.service.fetchLists().then(c("map",l("name"))).then((h=this,function(t){var e;for(e=1;0<=d.call(t,n);)n=r+"-"+e++;return i.then(c("saveAsList",{name:n,tags:u,description:h.description}))})))},t.prototype.enrichment=function(t,e){return this.service.enrichment(s({list:this.name},t),e)},t.prototype.shareWithUser=function(t,e){return p(e,this.service.post("lists/shares",{list:this.name,with:t}))},t.prototype.inviteUserToShare=function(t,e,r){return null==e&&(e=!0),null==r&&(r=function(){}),p(r,this.service.post("lists/invitations",{list:this.name,to:t,notify:!!e}))},t}(),r.List=t}).call(this)},{"./util":16}],6:[function(l,t,c){(function(){var i,e,r,o,s,t,a,n,u=function(t,e){return function(){return t.apply(e,arguments)}},h=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};o=l("./table").Table,r=l("./path").PathInfo,(n=l("./util")).flatten,s=n.find,n.error,a=n.omap,t=c,i=new o({name:"Object",tags:[],displayName:"Object",attributes:{},references:{},collections:{}}),(e=function(){function t(t){var e,r,n;this.name=t.name,e=t.classes,this.findCommonType=u(this.findCommonType,this),this.findSharedAncestor=u(this.findSharedAncestor,this),this.getAncestorsOf=u(this.getAncestorsOf,this),this.getSubclassesOf=u(this.getSubclassesOf,this),this.getPathInfo=u(this.getPathInfo,this),r=a((n=this,function(t,e){return[t,new o(e,n)]})),this.classes=r(e),this.classes["java.lang.Object"]=i}return t.prototype.getPathInfo=function(t,e){return r.parse(this,t,e)},t.prototype.getSubclassesOf=function(t){var e,r,n,i,o,s;if(null==(n=t&&t.name?t:this.classes[t]))throw new Error(t+" is not a table");for(e in s=[n.name],i=this.classes)r=i[e],o=n.name,0<=h.call(r.parents(),o)&&(s=s.concat(this.getSubclassesOf(r)));return s},t.prototype.getAncestorsOf=function(t){var e,r,n,i;if(null==(e=t&&t.name?t:this.classes[t]))throw new Error(t+" is not a table");return(r=e.parents()).filter((i=this,function(t){return i.classes[t]})).reduce((n=this,function(t,e){return t.concat(n.getAncestorsOf(e))}),r)},t.prototype.findSharedAncestor=function(t,e){var r,n;return null===e||null===t?null:t===e?t:(r=this.getAncestorsOf(t),0<=h.call(r,e)?e:(n=this.getAncestorsOf(e),0<=h.call(n,t)?t:s(r,function(t){return 0<=h.call(n,t)})))},t.prototype.findCommonType=function(t){return null==t&&(t=[]),t.reduce(this.findSharedAncestor)},t}()).prototype.makePath=e.prototype.getPathInfo,e.prototype.findCommonTypeOfMultipleClasses=e.prototype.findCommonType,e.load=function(t){try{return new e(t)}catch(t){throw new Error("Error loading model: "+t)}},e.INTEGRAL_TYPES=["int","Integer","long","Long"],e.FRACTIONAL_TYPES=["double","Double","float","Float"],e.NUMERIC_TYPES=e.INTEGRAL_TYPES.concat(e.FRACTIONAL_TYPES),e.BOOLEAN_TYPES=["boolean","Boolean"],t.Model=e}).call(this)},{"./path":7,"./table":14,"./util":16}],7:[function(v,t,m){(function(){var s,f,p,t,a,u,h,l,e,d,c,y,r,g,n=function(t,e){return function(){return t.apply(e,arguments)}},i=[].slice,o=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};e=m,r=v("./util"),g=r.withCB,a=r.concatMap,l=r.get,t=r.any,c=r.set,u=r.copy,y=r.success,h=r.error,s={},f={},d=function(t,e,r){var n,i,o;return(null!=t?t.name:void 0)+"|"+(null!=t&&null!=(i=t.service)?i.root:void 0)+"|"+e+":"+function(){var t;for(n in t=[],r)o=r[n],t.push(n+"="+o);return t}()},(p=function(){function r(t){var e,r;this.root=t.root,this.model=t.model,this.descriptors=t.descriptors,this.subclasses=t.subclasses,this.displayName=t.displayName,this.ident=t.ident,this.allDescriptors=n(this.allDescriptors,this),this.getChildNodes=n(this.getChildNodes,this),this.getDisplayName=n(this.getDisplayName,this),this.isa=n(this.isa,this),this.append=n(this.append,this),this.getParent=n(this.getParent,this),this.getEndClass=n(this.getEndClass,this),this.containsCollection=n(this.containsCollection,this),this.isCollection=n(this.isCollection,this),this.isReverseReference=n(this.isReverseReference,this),this.isReference=n(this.isReference,this),this.isClass=n(this.isClass,this),this.isAttribute=n(this.isAttribute,this),this.isRoot=n(this.isRoot,this),r=this.descriptors,this.mid=2<=r.length?i.call(r,0,e=r.length-1):(e=0,[]),this.end=r[e++],null==this.ident&&(this.ident=d(this.model,this,this.subclasses))}return r.prototype.isRoot=function(){return 0===this.descriptors.length},r.prototype.isAttribute=function(){return null!=this.end&&!this.isReference()},r.prototype.isClass=function(){return this.isRoot()||this.isReference()},r.prototype.isReference=function(){var t;return null!=(null!=(t=this.end)?t.referencedType:void 0)},r.prototype.isReverseReference=function(){var t,e,r,n,i;return!!(this.isReference()&&0<this.mid.length)&&(i=(r=this.end).reverseReference,n=r.referencedType,t=(e=this.getParent()).getParent(),null!=n&&t.isa(n)&&e.end.name===i)},r.prototype.isCollection=function(){var t,e;return null!=(t=null!=(e=this.end)?e.isCollection:void 0)&&t},r.prototype.containsCollection=function(){return t(this.descriptors,function(t){return t.isCollection})},r.prototype.getEndClass=function(){var t;return this.model.classes[this.subclasses[this.toString()]||(null!=(t=this.end)?t.referencedType:void 0)]||this.root},r.prototype.getParent=function(){if(this.isRoot())throw new Error("Root paths do not have parents");return new r({root:this.root,model:this.model,descriptors:this.mid.slice(),subclasses:this.subclasses})},r.prototype.append=function(t){var e;if(this.isAttribute())throw new Error(this+" is an attribute.");if(null==(e="string"==typeof t?this.getType().fields[t]:t))throw new Error(t+" is not a field of "+this.getType());return new r({root:this.root,model:this.model,descriptors:this.descriptors.concat([e]),subclasses:this.subclasses})},r.prototype.isa=function(t){var e,r;return null!=t&&(this.isAttribute()?this.getType()===t:(e=t.name?t.name:""+t)===(r=this.getType()).name||0<=o.call(this.model.getAncestorsOf(r),e))},r.prototype.getDisplayName=function(t){var e,r,n,i,o;return(r=this.displayName)?y(r):(null==this.namePromise&&(this.namePromise=(e=s[this.ident])?y(e):this.isRoot()&&this.root.displayName?y(this.root.displayName):null==this.model.service?h("No service"):(i="model"+a(function(t){return"/"+t.name})(this.allDescriptors()),n=c({format:"json"})(u(this.subclasses)),this.model.service.get(i,n).then(l("display")).then((o=this,function(t){var e;return null!=s[e=o.ident]?s[e]:s[e]=t})))),g(t,this.namePromise))},r.prototype.getChildNodes=function(){var t,e,r,n,i;for(e in i=[],n=(null!=(r=this.getEndClass())?r.fields:void 0)||{})t=n[e],i.push(this.append(t));return i},r.prototype.allDescriptors=function(){return[this.root].concat(this.descriptors)},r.prototype.toString=function(){return this.allDescriptors().map(l("name")).join(".")},r.prototype.equals=function(t){return this===t||this.ident&&(null!=t?t.ident:void 0)===this.ident},r.prototype.getType=function(){var t,e;return(null!=(t=this.end)&&null!=(e=t.type)?e.replace(/java\.lang\./,""):void 0)||this.getEndClass()},r}()).prototype.toPathString=p.prototype.toString,p.parse=function(i,o,s){var t,a,e,u,r,h,l,c,n;return null==s&&(s={}),r=d(i,o,s),(t=f[r])?t:(c=(o+"").split("."),n=a=i.classes[c.shift()],h=n.name,e=function(){var t,e,r,n;for(n=[],t=0,e=c.length;t<e;t++){if(l=c[t],!(u=(null!=a?a.fields[l]:void 0)||(null!=(r=a=i.classes[s[h]])?r.fields[l]:void 0)))throw new Error("Could not find "+l+" in "+a+" when parsing "+o);h+="."+l,a=i.classes[u.type||u.referencedType],n.push(u)}return n}(),f[r]=new p({root:n,model:i,descriptors:e,subclasses:s,ident:r}))},p.flushCache=function(){return f={},s={}},e.PathInfo=p}).call(this)},{"./util":16}],8:[function(e,r,t){(function(){var t;t=e("es6-promise").Promise,r.exports=t}).call(this)},{"es6-promise":27}],9:[function(Z,t,tt){(function(){var e,h,t,l,u,c,r,n,i,o,y,g,v,s,m,b,w,_,S,a,f,E,T,O,C,p,k,A,R,d,x,L,j,I,N,q,P,M,B,U,D,F,V,H,W,G,X,J,z,K=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},Y=function(t,e){return function(){return t.apply(e,arguments)}},Q=[].slice,$={}.hasOwnProperty;for(t=Z("backbone-events-standalone"),(k=tt).xml=Z("./xml"),J=Z("./util"),c=J.REQUIRES_VERSION,z=J.withCB,I=J.merge,S=J.filter,B=J.partition,f=J.fold,m=J.concatMap,C=J.id,E=J.get,J.invoke,W=J.querystring,T=function(t){var e;if(!(e=null!=(null!=t?t.toLowerCase:void 0)?u.OP_DICT[t.toLowerCase()]:null))throw new Error("Illegal constraint operator: "+t);return e},n=(e=["path","op","code"]).concat(["value","extraValue"]),r=["rowByRow","eachRow","recordByRecord","eachRecord","records","rows","table","tableRows","values"],l=function(t){return J.compose(t.fetchList,E("listName"))},h=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],w=function(t){return null==t&&(t=""),t.substr(t.indexOf("."))},s=function(t){return null!=t?"<value>"+J.escape(t)+"</value>":"<nullValue/>"},y=function(e,r){var n,i;return function(){var t;for(n in t=[],e)i=e[n],0<=K.call(r,n)&&t.push(n+'="'+J.escape(i)+'" ');return t}().join("")},M=function(t){return"<constraint "+y(t,e)+"/>"},G=function(t){return"<constraint "+y(t,["path","type"])+"/>"},F=function(t){return"<constraint "+y(t,n)+"/>"},q=function(t){return"<constraint "+y(t,e)+">"+m(s)(t.values)+"</constraint>"},p=function(t){return"<constraint "+y(t,e)+'ids="'+t.ids.join(",")+'"/>'},g=function(t){var e;return null!=t.values?q(t):null!=t.ids?p(t):null==t.op?G(t):(e=t.op,0<=K.call(u.NULL_OPS,e)?M(t):F(t))},O=function(t){return t.replace(/^[^\.]+\./,"")},b=function(t){var e,r,n,i,o,s,a,u,h,l,c;return s=t.path,h=t.type,o=t.op,l=t.value,c=t.values,n=t.extraValue,i=t.ids,e=t.code,r=t.editable,u=t.switched,a=t.switchable,i=null!=i?i.slice():void 0,c=null!=c?c.slice():void 0,P({path:s,type:h,op:o,value:l,values:c,extraValue:n,ids:i,code:e,editable:r,switched:u,switchable:a})},v=function(t){var e;return(e=b(t)).path=O(e.path),e},P=function(t){var e;for(e in t)null==t[e]&&delete t[e];return t},_=function(t,e){return"Did not remove a single constraint. original = "+t+", reduced = "+e},R=function(t,e){var r,n,i,o,s,a;if(r={path:t},null===e)r.op="IS NULL";else if(J.isArray(e))r.op="ONE OF",r.values=e;else if("string"==(o=typeof e)||"number"==o||"boolean"==o)s="function"==typeof e.toUpperCase?e.toUpperCase():void 0,0<=K.call(u.NULL_OPS,s)?r.op=e:(r.op="=",r.value=e);else if(i=function(){var t;for(n in t=[],e)e[n],t.push(n);return t}(),0<=K.call(i,"isa"))J.isArray(e.isa)?(r.op=n,r.values=e.isa):r.type=e.isa;else for(n in 0<=K.call(i,"extraValue")&&(r.extraValue=e.extraValue),e)a=e[n],"extraValue"!==n&&(r.op=n,J.isArray(a)?r.values=a:r.value=a);return r},A=function(t){var e,r,n,i;return r={path:(t=t.slice()).shift()},1===t.length?(n="function"==typeof(e=t[0]).toUpperCase?e.toUpperCase():void 0,0<=K.call(u.NULL_OPS,n)?r.op=e:r.type=e):2<=t.length&&(r.op=t[0],i=t[1],J.isArray(i)?r.values=i:r.value=i,3===t.length&&(r.extraValue=t[2])),r},H=function(n){var i;return function(){var t,e,r;for(r=[],t=0,e=n.length;t<e;t++)i=n[t],r.push(i.path+" "+i.direction);return r}().join(" ")},V=function(t){var e,r,n,i,o,s,a;if(null==t)return[];for(i=t.split(/\s+/),s=[],r=0,n=(o=function(){var t,e,r;for(r=[],a=t=0,e=i.length/2;0<=e?t<e:e<t;a=0<=e?++t:--t)r.push(2*a);return r}()).length;r<n;r++)e=o[r],s.push([i[e],i[e+1]]);return s},D=function(){var n,i;if(i=this.sortOrder,this.sortOrder=function(){var t,e,r;for(r=[],t=0,e=i.length;t<e;t++)n=i[t],this.isRelevant(n.path)&&r.push(n);return r}.call(this),i.length!==this.sortOrder.length)return this.trigger("change:sortorder change:orderby",this.sortOrder.slice())},u=function(){var s,f,p,a,n,t,d,e,u;function o(t,e,r){var n,i,o,s,a,u,h,l,c,f,p,d,y,g,v,m;for(o=(a=null!=r?r:{}).model,m=a.summaryFields,this.addConstraint=Y(this.addConstraint,this),this.expandStar=Y(this.expandStar,this),this.adjustPath=Y(this.adjustPath,this),this.select=Y(this.select,this),null==t&&(t={}),this.constraints=[],this.views=[],this.joins={},this.displayNames=J.copy(null!=(l=null!=(c=t.displayNames)?c:t.aliases)?l:{}),n=0,i=(f=["name","title","comment","description","type"]).length;n<i;n++)null!=t[s=f[n]]&&(this[s]=t[s]);this.service=null!=e?e:{},this.model=null!=(p=null!=o?o:t.model)?p:{},this.summaryFields=null!=(d=null!=m?m:t.summaryFields)?d:{},this.root=null!=(y=t.root)?y:t.from,this.maxRows=null!=(g=null!=(v=t.size)?v:t.limit)?g:t.maxRows,this.start=null!=(u=null!=(h=t.start)?h:t.offset)?u:0,this.select(t.views||t.view||t.select||[]),this.addConstraints(t.constraints||t.where||[]),this.addJoins(t.joins||t.join||[]),this.orderBy(t.sortOrder||t.orderBy||[]),null!=t.constraintLogic&&(this.constraintLogic=t.constraintLogic),this.on("change:views",D,this)}return o.JOIN_STYLES=["INNER","OUTER"],o.BIO_FORMATS=["gff3","fasta","bed"],o.NULL_OPS=["IS NULL","IS NOT NULL"],o.ATTRIBUTE_VALUE_OPS=["=","!=",">",">=","<","<=","CONTAINS","LIKE","NOT LIKE"],o.MULTIVALUE_OPS=["ONE OF","NONE OF"],o.RANGE_OPS=["OVERLAPS","DOES NOT OVERLAP","OUTSIDE","WITHIN","CONTAINS","DOES NOT CONTAIN"],o.TERNARY_OPS=["LOOKUP"],o.LOOP_OPS=["=","!="],o.LIST_OPS=["IN","NOT IN"],o.OP_DICT={"=":"=","==":"==",eq:"=",eqq:"==","!=":"!=",ne:"!=",">":">",gt:">",">=":">=",ge:">=","<":"<",lt:"<","<=":"<=",le:"<=",contains:"CONTAINS",CONTAINS:"CONTAINS","does not contain":"DOES NOT CONTAIN","DOES NOT CONTAIN":"DOES NOT CONTAIN",like:"LIKE",LIKE:"LIKE","not like":"NOT LIKE","NOT LIKE":"NOT LIKE",lookup:"LOOKUP","IS NULL":"IS NULL","is null":"IS NULL","IS NOT NULL":"IS NOT NULL","is not null":"IS NOT NULL","ONE OF":"ONE OF","one of":"ONE OF","NONE OF":"NONE OF","none of":"NONE OF",in:"IN","not in":"NOT IN",IN:"IN","NOT IN":"NOT IN",WITHIN:"WITHIN",within:"WITHIN",OVERLAPS:"OVERLAPS",overlaps:"OVERLAPS","DOES NOT OVERLAP":"DOES NOT OVERLAP","does not overlap":"DOES NOT OVERLAP",OUTSIDE:"OUTSIDE",outside:"OUTSIDE",ISA:"ISA",isa:"ISA"},n=["name","view","sortOrder","constraintLogic","title","description","comment"],f=["path","type","op","code","value","ids"],d=function(t,e){var r,n,i,o;for(i=[],r=0,n=e.length;r<n;r++)o=e[r],t.hasAttribute(o)&&i.push([o,t.getAttribute(o)]);return i},p=function(t,e){var r,n,i,o,s;for(s=[],n=0,i=(o=t.getElementsByTagName(e)).length;n<i;n++)r=o[n],s.push(r);return s},u=function(e){return function(t){return t.getAttribute(e)}},o.fromXML=function(t){var l,e,i,o,r,c,s;if(e=k.xml.parse(t),!(c=p(e,"query")[0]||p(e,"template")[0]))throw new Error("no query in xml");return o=u("path"),s=u("style"),(r=J.pairsToObj(d(c,n))).view=r.view.split(/\s+/),r.sortOrder=V(r.sortOrder),r.joins=function(){var t,e,r,n;for(n=[],t=0,e=(r=p(c,"join")).length;t<e;t++)i=r[t],"OUTER"===s(i)&&n.push(o(i));return n}(),r.constraints=function(){var t,e,r,n,i,o,s,a,u,h;for(n=[],t=0,e=(r=p(c,"constraint")).length;t<e;t++)l=r[t],n.push((i=l,h=u=a=s=o=void 0,null!=(o=J.pairsToObj(d(i,f))).ids&&(o.ids=function(){var t,e,r,n;for(n=[],e=0,t=(r=o.ids.split(",")).length;e<t;e++)h=r[e],n.push(parseInt(h,10));return n}()),(u=p(i,"value")).length&&(o.values=function(){var t,e,r;for(r=[],e=0,t=u.length;e<t;e++)a=u[e],r.push(function(){var t,e,r,n;for(n=[],e=0,t=(r=a.childNodes).length;e<t;e++)s=r[e],n.push(s.data);return n}().join(""));return r}()),o));return n}(),r},o.prototype.constraints=[],o.prototype.views=[],o.prototype.joins={},o.prototype.constraintLogic="",o.prototype.sortOrder="",o.prototype.name=null,o.prototype.title=null,o.prototype.comment=null,o.prototype.description=null,o.prototype.removeFromSelect=function(o){var n,s,i,a;return null==o&&(o=[]),o=J.stringList(o),n=J.compose(this.expandStar,this.adjustPath),o=J.flatten(function(){var t,e,r;for(r=[],t=0,e=o.length;t<e;t++)i=o[t],r.push(n(i));return r}()),this.sortOrder=function(){var t,e,r,n,i;for(i=[],t=0,e=(r=this.sortOrder).length;t<e;t++)n=(s=r[t]).path,0<=K.call(o,n)||i.push(s);return i}.call(this),this.views=function(){var t,e,r,n;for(n=[],t=0,e=(r=this.views).length;t<e;t++)a=r[t],0<=K.call(o,a)||n.push(a);return n}.call(this),this.trigger("remove:view",o),this.trigger("change:views",this.views),this.trigger("change",this.views)},o.prototype.removeConstraint=function(n,t){var i,o,s,e;if(null==t&&(t=!1),s=this.constraints,o="string"==typeof n?function(t){return t.code===n}:function(t){var e,r;return t.path===n.path&&t.op===n.op&&t.value===n.value&&t.extraValue===n.extraValue&&n.type===t.type&&(null!=(e=t.values)?e.join("%%"):void 0)===(null!=(r=n.values)?r.join("%%"):void 0)},(e=function(){var t,e,r;for(r=[],t=0,e=s.length;t<e;t++)i=s[t],o(i)||r.push(i);return r}()).length!==s.length-1)throw new Error(_(s,e));if(this.constraints=e,!t)return this.trigger("change:constraints"),this.trigger("change"),this.trigger("removed:constraint",J.find(s,o))},o.prototype.addToSelect=function(n,t){var e,i,o,r,s,a,u,h;if(null==n&&(n=[]),null==t&&(t={}),n=J.stringList(n),i=J.compose(this.expandStar,this.adjustPath),a=J.flatten(function(){var t,e,r;for(r=[],t=0,e=n.length;t<e;t++)u=n[t],r.push(i(u));return r}()),(e=function(){var t,e,r;for(r=[],t=0,e=a.length;t<e;t++)o=a[t],0<=K.call(this.views,o)&&r.push(o);return r}.call(this)).length)throw new Error(e+" already in the select list");if((e=function(){var t,e,r;for(r=[],t=0,e=a.length;t<e;t++)o=a[t],1<function(){var t,e,r;for(r=[],e=0,t=a.length;e<t;e++)(h=a[e])===o&&r.push(h);return r}().length&&r.push(o);return r}()).length)throw new Error(e+" specified multiple times as arguments to addToSelect");return(r=this.views).push.apply(r,a),t.silent?t.events=(null!=(s=t.events)?s:[]).concat(["change","add:view","change:views"]):(this.trigger("add:view change:views",a),this.trigger("change")),this},o.prototype.select=function(t,e){var r,n;n=this.views.slice();try{this.views=[],this.addToSelect(t,e)}catch(t){r=t,this.views=n,J.error(r)}return this},o.prototype.adjustPath=function(t){return t=t&&t.name?t.name:""+t,null!=this.root?t.match("^"+this.root)||(t=this.root+"."+t):this.root=t.split(".")[0],t},o.prototype.getPossiblePaths=function(t,u,e){var r,h,n,i,o,l;return null==t&&(t=3),null==u&&(u=!0),null==e&&(e=null),o="string"==typeof e?function(t){return t[e]()}:e,h=function(e,r){var n,i,o,t,s,a;return s=l.getPathInfo(e),!u&&s.isReverseReference()?[]:s.isAttribute()?[s]:(n=s.getType(),a=m(function(t){return h(e+"."+t.name,r-1)}),t=n&&0<r?a(function(){var t,e;for(o in e=[],t=n.fields)i=t[o],e.push(i);return e}()):[],[s].concat(t))},n=t+"-"+u,null==(l=this)._possiblePaths&&(this._possiblePaths={}),i=(null!=(r=this._possiblePaths)[n]?r[n]:r[n]=h(this.root,t)).slice(),null!=o?i.filter(o):i},o.prototype.makePath=o.prototype.getPathInfo=function(t){var e,r,n;return e=this.adjustPath(t),(r=null!=(n=this.model)&&"function"==typeof n.getPathInfo?n.getPathInfo(e,this.getSubclasses()):void 0)&&e in this.displayNames&&(r.displayName=this.displayNames[e]),r},e=function(t){return[t.path,t.type]},t=J.compose(J.pairsToObj,J.map(e),S(E("type"))),o.prototype.getSubclasses=function(){return t(this.constraints)},o.prototype.getType=function(t){return this.getPathInfo(t).getType()},o.prototype.getViewNodes=function(){var i,o,e;return e=this,o=function(t){return e.getPathInfo(t).getParent()},J.uniqBy(String,function(){var t,e,r,n;for(n=[],t=0,e=(r=this.views).length;t<e;t++)i=r[t],n.push(o(i));return n}.call(this))},o.prototype.isInView=function(t){var e,r,n;if(!(e=this.getPathInfo(t)))throw new Error("Invalid path: "+t);return e.isAttribute()?(n=e.toString(),0<=K.call(this.views,n)):(r=e.toString(),J.any(this.getViewNodes(),function(t){return t.toString()===r}))},o.prototype.isConstrained=function(t,e){var r,n,i;if(null==e&&(e=!1),!(r=this.getPathInfo(t)))throw new Error("Invalid path: "+t);return n=function(t){return null!=t.op&&t.path===r.toString()},!r.isAttribute()&&e&&(i=this,n=function(t){return null!=t.op&&(t.path===r.toString()||r.equals(i.getPathInfo(t.path).getParent()))}),J.any(this.constraints,n)},o.prototype.canHaveMultipleValues=function(t){return this.getPathInfo(t).containsCollection()},o.prototype.getQueryNodes=function(){var i,t,o,e;return e=this.getViewNodes(),t=function(){var t,e,r,n;for(n=[],t=0,e=(r=this.constraints).length;t<e;t++)null==(i=r[t]).type&&((o=this.getPathInfo(i.path)).isAttribute()?n.push(o.getParent()):n.push(o));return n}.call(this),J.uniqBy(String,e.concat(t))},o.prototype.isInQuery=function(t){var i,e,r,n,o,s;if(n=this.getPathInfo(t)){for(o=n.toPathString(),e=0,r=(s=this.views.concat(function(){var t,e,r,n;for(n=[],e=0,t=(r=this.constraints).length;e<t;e++)null==(i=r[e]).type&&n.push(i.path);return n}.call(this))).length;e<r;e++)if(0===(t=s[e]).indexOf(o))return!0;return!1}return!0},o.prototype.isRelevant=function(t){var e,r,n;return(r=this.getPathInfo(t)).isAttribute()&&(r=r.getParent()),n=r.toString(),e=this.getViewNodes(),J.any(e,function(t){return t.toPathString()===n})},o.prototype.expandStar=function(t){var e,i,r,o,s,n,a,u;if(/\*$/.test(t))if(a=t.substr(0,t.lastIndexOf(".")),r=function(t){return a+t},i=this.getType(a),/\.\*$/.test(t)){if(i&&this.summaryFields[i.name])return o=J.compose(r,w),function(){var t,e,r,n;for(n=[],t=0,e=(r=this.summaryFields[i.name]).length;t<e;t++)s=r[t],this.hasView(s)||n.push(o(s));return n}.call(this)}else if(/\.\*\*$/.test(t))return u=this.expandStar(a+".*"),e=function(){var t;for(n in t=[],i.attributes)t.push(r("."+n));return t}(),J.uniqBy(C,u.concat(e));return t},o.prototype.isOuterJoin=function(t){return"OUTER"===this.joins[this.adjustPath(t)]},o.prototype.hasView=function(t){var e;return this.views&&(e=this.adjustPath(t),0<=K.call(this.views,e))},o.prototype.count=function(t){if(this.service.count)return this.service.count(this,t);throw new Error("This query has no service with count functionality attached.")},o.prototype.appendToList=function(r,t){var e,n,i,o;return o=(null!=r?r.name:void 0)?(e=r.name,function(t,e){if(null==t)return r.size=e.size}):(e=String(r),null),i={listName:e,query:this.makeListQuery().toXML()},n=l(this.service),z(o,t,this.service.post("query/append/tolist",i).then(n))},o.prototype.selectPreservingImpliedConstraints=function(t){var e,r,n,i,o;for(null==t&&(t=[]),(o=this.clone()).select(t),e=0,r=(i=this.getViewNodes()).length;e<r;e++)n=i[e],this.isOuterJoined(n)||o.isInView(n||o.isConstrained(n))||null==n.getEndClass().fields.id||o.addConstraint([n.append("id"),"IS NOT NULL"]);return o},o.prototype.makeListQuery=function(){var t,e;return 1===(t=this.views.slice()).length&&(null!=(e=t[0])?e.match(/\.id$/):void 0)||(t=["id"]),this.selectPreservingImpliedConstraints(t)},o.prototype.saveAsList=function(t,e){var r,n;return n=this.makeListQuery(),(r=J.copy(t)).listName=r.listName||r.name,r.query=n.toXML(),t.tags&&(r.tags=t.tags.join(";")),z(e,this.service.post("query/tolist",r).then(l(this.service)))},o.prototype.summarise=function(t,e,r){return this.filterSummary(t,"",e,r)},o.prototype.summarize=function(){var t;return t=1<=arguments.length?Q.call(arguments,0):[],this.summarise.apply(this,t)},a=function(t){var e,r,n,i,o,s,a;for(e=null!=(null!=(o=t.results[0])?o.max:void 0),r=0,n=(s=t.results).length;r<n;r++)(i=s[r]).count=parseInt(i.count,10);return a={uniqueValues:t.uniqueValues,filteredCount:t.filteredCount},e&&(a=I(a,t.results[0])),t.stats=a,t},o.prototype.filterSummary=function(t,e,r,n){var i,o,s;return null==n&&(n=function(){}),J.isFunction(r)&&(n=(i=[r,null])[0],r=i[1]),t=this.adjustPath(t),s=this.clone(),K.call(s.views,t)<0&&s.views.push(t),o={query:s.toXML(),summaryPath:t,format:"jsonrows"},r&&(o.size=r),e&&(o.filterTerm=e),z(n,this.service.post("query/results",o).then(a))},o.prototype.clone=function(t){var e,r,n,i;if(null==(e=new o(this,this.service))._callbacks&&(e._callbacks={}),t){for(r in n=this._callbacks)$.call(n,r)&&(i=n[r],e._callbacks[r]=i);e.off("change:views",D,this)}return e},o.prototype.next=function(){var t;return t=this.clone(),this.maxRows&&(t.start=this.start+this.maxRows),t},o.prototype.previous=function(){var t;return t=this.clone(),this.maxRows?t.start=this.start-this.maxRows:t.start=0,t},o.prototype.getSortDirection=function(t){var r,e;if(r=this.adjustPath(t),!this.isInQuery(r)&&!this.isRelevant(r))throw new Error(t+" is not in the query");return null!=(e=J.find(this.sortOrder,function(t){var e;return e=t.path,r===e}))?e.direction:void 0},o.prototype.isOuterJoined=function(t){var e,r;for(e in t=this.adjustPath(t),r=this.joins)if("OUTER"===r[e]&&0===t.indexOf(e))return!0;return!1},o.prototype.getOuterJoin=function(e){var t,r,n;return e=this.adjustPath(e),t=function(){var t;for(r in t=[],this.joins)t.push(r);return t}.call(this).sort(function(t,e){return e.length-t.length}),J.find(t,(n=this,function(t){return"OUTER"===n.joins[t]&&0===e.indexOf(t)}))},o.prototype._parse_sort_order=function(e){var r,t,n,i;if(null==e)throw new Error("No input");return(n="string"==typeof e?{path:e,direction:"ASC"}:J.isArray(e)?{path:e[0],direction:e[1]}:null==e.path?{path:(t=function(){var t;for(r in t=[],e)i=e[r],t.push([r,i]);return t}())[0],direction:t[1]}:{path:e.path,direction:e.direction}).path=this.adjustPath(n.path),null==n.direction&&(n.direction="ASC"),n.direction=n.direction.toUpperCase(),n},o.prototype.addOrSetSortOrder=function(e){var t;return e=this._parse_sort_order(e),null==(t=this.getSortDirection(e.path))?this.addSortOrder(e):t!==e.direction&&(J.find(this.sortOrder,function(t){return t.path===e.path}).direction=e.direction,this.trigger("change:sortorder",this.sortOrder),this.trigger("change")),this},o.prototype.addSortOrder=function(t,e){var r;if(r=(null!=e?e:{}).silent,this.sortOrder.push(this._parse_sort_order(t)),!r)return this.trigger("add:sortorder",t),this.trigger("change:sortorder",this.sortOrder),this.trigger("change")},o.prototype.orderBy=function(t,e){var r,o,n,i,s,a,u,h;for(null==e&&(e={}),a=this.sortOrder.slice(),this.sortOrder=[],n=0,i=t.length;n<i;n++)s=t[n],this.addSortOrder(this._parse_sort_order(s),{silent:!0});return r=function(){var t,e,r,n,i;for(i=[],e=0,t=(r=this.sortOrder).length;e<t;e++)n=r[e],u=n.path,o=n.direction,i.push({path:u,direction:o});return i}.call(this),this.trigger("set:sortorder",r),H(a)!==this.getSorting()&&(e.silent?e.events=(null!=(h=e.events)?h:[]).concat(["change","change:sortorder"]):(this.trigger("change:sortorder",r),this.trigger("change"))),this},o.prototype.addJoins=function(t){var e,r,n,i,o,s,a;if(J.isArray(t)){for(o=[],n=0,i=t.length;n<i;n++)e=t[n],o.push(this.addJoin(e));return o}for(r in s=[],t)a=t[r],s.push(this.addJoin({path:r,style:a}));return s},o.prototype.addJoin=function(t){return"string"==typeof t&&(t={path:t,style:"OUTER"}),this.setJoinStyle(t.path,t.style)},o.prototype.setJoinStyle=function(t,e){if(null==e&&(e="OUTER"),t=this.adjustPath(t),e=e.toUpperCase(),K.call(o.JOIN_STYLES,e)<0)throw new Error("Invalid join style: "+e);return this.joins[t]!==e&&(this.joins[t]=e,this.trigger("change:joins",{path:t,style:e}),this.trigger("change")),this},o.prototype.addConstraints=function(t,r){var e,n,i,o,s,a,u;if(null==r&&(r="and"),this.__silent__=!0,s=this.constraintLogic,J.isArray(t))for(i=0,o=t.length;i<o;i++)e=t[i],this.addConstraint(e,r);else for(a in u=this,n=function(t,e){return u.addConstraint(R(t,e),r)},t)n(a,t[a]);return this.__silent__=!1,this.trigger("add:constraint"),this.trigger("change:constraints"),s!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")},o.prototype.addConstraint=function(t,e){var n,r,i,o,s,a,u;if(null==e&&(e="and"),"and"!==e&&"or"!==e)throw new Error("Unknown logical conjunction: "+e);return"OFF"===(t=J.isArray(t)?A(t):b(t)).switched||(t.path=this.adjustPath(t.path),null==t.type&&(t.op=T(t.op)),this.constraints.push(t),i="or"===e||0<(null!=(u=this.constraintLogic)?u.length:void 0),o=this.constraints.length,a=this.constraintLogic,i&&(s=2===o?h[0]+" "+e+" "+h[1]:((r=this.constraintLogic)||(r=function(){var t,e,r;for(r=[],n=t=0,e=o-2;0<=e?t<=e:e<=t;n=0<=e?++t:--t)r.push(h[n]);return r}().join(" and ")),"("+r+") "+e+" "+h[o-1]),this.constraintLogic=s),this.__silent__||(this.trigger("add:constraint",t),this.trigger("change:constraints"),a!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change"))),this},o.prototype.getSorting=function(){return H(this.sortOrder)},o.prototype.getConstraintXML=function(){var i,t;return(t=function(){var t,e,r,n;for(n=[],t=0,e=(r=this.constraints).length;t<e;t++)(null==(i=r[t]).type||this.isInQuery(i.path))&&n.push(i);return n}.call(this)).length?m(g)(m(C)(B(function(t){return null!=t.type})(t))):""},o.prototype.getJoinXML=function(){var r,n;return function(){var t,e;for(r in e=[],t=this.joins)n=t[r],this.isInQuery(r)&&"OUTER"===n&&e.push('<join path="'+r+'" style="OUTER"/>');return e}.call(this).join("")},o.prototype.toXML=function(){var e,r,n;return e={model:this.model.name,view:this.views.join(" "),sortOrder:this.getSorting(),constraintLogic:this.constraintLogic},null!=this.name&&(e.name=this.name),"<query "+function(){var t;for(r in t=[],e)(n=e[r])&&t.push(r+'="'+n+'"');return t}().join(" ")+" >"+this.getJoinXML()+this.getConstraintXML()+"</query>"},o.prototype.toJSON=function(){var i,o,s,a;return P({name:this.name,title:this.title,comment:this.comment,description:this.description,constraintLogic:this.constraintLogic,from:this.root,select:function(){var t,e,r,n;for(n=[],t=0,e=(r=this.views).length;t<e;t++)a=r[t],n.push(O(a));return n}.call(this),orderBy:function(){var t,e,r,n,i;for(i=[],t=0,e=(r=this.sortOrder).length;t<e;t++)n=r[t],s=n.path,o=n.direction,i.push({path:O(s),direction:o});return i}.call(this),joins:function(){var t,e;for(s in e=[],t=this.joins)"OUTER"===t[s]&&e.push(O(s));return e}.call(this),where:function(){var t,e,r,n;for(n=[],t=0,e=(r=this.constraints).length;t<e;t++)i=r[t],n.push(v(i));return n}.call(this)})},o.prototype.fetchCode=function(t,e){var r;return r={query:this.toXML(),lang:t},z(e,this.service.post("query/code",r).then(this.service.VERIFIER).then(E("code")))},o.prototype.setName=function(t){this.name=t},o.prototype.save=function(r,n){return c(this.service,16,(i=this,function(){var t,e;return J.isFunction(r)&&(r=(t=[null,r])[0],n=t[1]),null!=r&&i.setName(r),e={type:"PUT",path:"user/queries",data:i.toXML(),contentType:"application/xml",dataType:"json"},z(n,i.service.authorise(e)).then(function(t){return i.service.doReq(t)}).then(function(t){return t.queries})}));var i},o.prototype.store=function(i,o){return c(this.service,16,(s=this,function(){var t,e,r,n;return J.isFunction(i)&&(i=(e=[null,i])[0],o=e[1]),null!=i&&s.setName(i),n=function(t,e){if(null==t)return s.setName(e)},t=J.compose(E(s.name),E("queries")),r={type:"POST",path:"user/queries",data:s.toXML(),contentType:"application/xml",dataType:"json"},z(o,n,s.service.authorise(r)).then(function(t){return s.service.doReq(t)}).then(t)}));var s},o.prototype.saveAsTemplate=function(r,n){return c(this.service,16,(i=this,function(){var t,e;if(J.isFunction(r)&&(r=(t=[null,r])[0],n=t[1]),null!=r&&i.setName(r),!i.name)throw new Error("Templates must have a name");return e={type:"POST",path:"templates",data:"<template "+y(i,["name","title","comment"])+">"+i.toXML()+"</template>",contentType:"application/xml",dataType:"json"},z(n,i.service.authorise(e).then(function(t){return i.service.doReq(t)}))}));var i},o.prototype.getCodeURI=function(t){var e,r;return r={query:this.toXML(),lang:t,format:"text"},null!=(null!=(e=this.service)?e.token:void 0)&&(r.token=this.service.token),this.service.root+"query/code?"+W(r)},o.prototype.getExportURI=function(t,e){var r,n;return null==t&&(t="tab"),null==e&&(e={}),0<=K.call(o.BIO_FORMATS,t)?this["get"+t.toUpperCase()+"URI"](e):(n=I(e,{query:this.toXML(),format:t}),null!=(null!=(r=this.service)?r.token:void 0)&&(n.token=this.service.token),this.service.root+"query/results?"+W(n))},o.prototype.needsAuthentication=function(){return J.any(this.constraints,function(t){var e;return"NOT IN"===(e=t.op)||"IN"===e})},o.prototype.fetchQID=function(t){return z(t,this.service.post("queries",{query:this.toXML()}).then(E("id")))},s=function(t){return t.append("primaryIdentifier").toString()},o.prototype.__bio_req=function(t,i){var o,e;return e=this.makeListQuery(),o=function(e){return J.any(t,function(t){return e.isa(t)})},e.views=J.take(i)(function(){var t,e,r,n;for(n=[],t=0,e=(r=this.getViewNodes()).length;t<e;t++)i=r[t],o(i)&&n.push(s(i));return n}.call(this)),{query:e.toXML(),format:"text"}},o.prototype._fasta_req=function(){return this.__bio_req(["SequenceFeature","Protein"],1)},o.prototype._bed_req=o.prototype._gff3_req=function(){return this.__bio_req(["SequenceFeature"])},o}(),X=f(function(t,e){return t.concat(e)}),u.prototype.toString=u.prototype.toXML,u.ATTRIBUTE_OPS=X([u.ATTRIBUTE_VALUE_OPS,u.MULTIVALUE_OPS,u.NULL_OPS]),u.REFERENCE_OPS=X([u.TERNARY_OPS,u.LOOP_OPS,u.LIST_OPS]),o=function(u,h){return function(i,t){var e,r,n,o,s,a;return null==i&&(i={}),null==t&&(t=function(){}),J.isFunction(i)&&(i=(n=[{},i])[0],t=n[1]),a=this,e=function(t){var e;return(e=a.getPathInfo(t)).isAttribute()?e:e.append("id")},null!=(null!=i?i.view:void 0)&&(i.view=function(){var t,e,r,n;for(n=[],t=0,e=(r=i.view).length;t<e;t++)s=r[t],n.push(this.getPathInfo(s).toString());return n}.call(this)),r=null!=i.export?this.selectPreservingImpliedConstraints(i.export.map(e)):this,o=I(r[u](),i),h.call(r,o,t)}},a=function(r){var t,e,n;return e="_"+r+"_req",n=(t="get"+r.toUpperCase())+"URI",u.prototype[t]=o(e,function(t,e){return z(e,this.service.post("query/results/"+r,t))}),u.prototype[n]=o(e,function(t,e){return null!=this.service.token&&(t.token=this.service.token),this.service.root+"query/results/"+r+"?"+W(t)})},d=0,x=(U=u.BIO_FORMATS).length;d<x;d++)a(U[d]);for(i=function(i){return function(){var t,e,r,n;if(e=arguments[0],t=2<=arguments.length?Q.call(arguments,1):[],this.service[i])return null==e?e={}:J.isFunction(e)&&(e={},t=function(){var t,e,r;for(r=[],e=0,t=arguments.length;e<t;e++)n=arguments[e],r.push(n);return r}.apply(this,arguments)),e=P(I({start:this.start,size:this.maxRows},e)),(r=this.service)[i].apply(r,[this,e].concat(Q.call(t)));throw new Error("Service does not provide '"+i+"'.")}},j=0,L=r.length;j<L;j++)N=r[j],u.prototype[N]=i(N);t.mixin(u.prototype),u.prototype.emit=u.prototype.trigger,u.prototype.bind=u.prototype.on,k.Query=u}).call(this)},{"./util":16,"./xml":18,"backbone-events-standalone":21}],10:[function(n,t,i){(function(){var t,l,r,c,f,e=function(t,e){return function(){return t.apply(e,arguments)}};r=n("querystring"),c=n("./util"),l=n("./http"),f=c.withCB,c.get,l.doReq,l.merge,t=function(){function t(){this.fetchMines=e(this.fetchMines,this),this.makePath=e(this.makePath,this)}return t.prototype.getFormat=function(t){return null==t&&(t="json"),t},t.prototype.isEmpty=function(t){return 0===Object.entries(t).length&&t.constructor===Object},t.prototype.errorHandler=function(t){var e;return(null!=(e=console.error)?e:console.log)(t)},t.prototype.makePath=function(t,e){return null==t&&(t=""),null==e&&(e={}),"http://registry.intermine.org/service/"+t+(this.isEmpty(e)?"":"?"+r.stringify(e))},t.prototype.makeRequest=function(t,e,r,n,i){var o,s,a,u,h;return null==t&&(t="GET"),null==e&&(e=""),null==r&&(r={}),null==n&&(n={}),null==i&&(i=function(){}),c.isArray(i)&&(i=(u=i)[0],s=u[1]),c.isArray(n)&&(n=c.pairsToObj(n)),null==s&&(s=this.errorHandler),n=c.copy(n),o=this.getFormat(n.format),l.supports(t)||(h=[t,l.getMethod(t)],n.method=h[0],t=h[1]),a={data:n,dataType:o,type:t,url:this.makePath(e,r)},f(i,l.doReq.call(this,a))},t.prototype.fetchMines=function(t,e,r){var n;return null==t&&(t=[]),null==e&&(e=[]),null==r&&(r=function(){}),e.every(function(t){return"dev"===t||"prod"===t||"all"===t})?(n={},t!==[]&&(n.q=t.join(" ")),e!==[]&&(n.mines=e.join(" ")),this.makeRequest("GET","instances",n,{},r)):f(r,new Promise(function(t,e){return e("Mines field should only contain 'dev', 'prod' or 'all'")}))},t}(),i.Registry=t}).call(this)},{"./http":3,"./util":16,querystring:39}],11:[function(ut,t,ht){(function(){var r,s,a,h,l,c,f,p,d,y,g,v,m,b,n,w,_,t,S,E,T,O,C,e,k,A,R,i,x,L,j,I,N,q,P,M,B,U,D,F,V,H,W,o,G,u,X,J,z,K,Y,Q,$,Z,tt,et,rt,nt,it,ot=function(t,e){return function(){return t.apply(e,arguments)}},st={}.hasOwnProperty,at=[].slice;for(t=ut("./promise"),m=ut("./model").Model,E=ut("./query").Query,g=ut("./lists").List,j=ut("./user").User,e=ut("./registry").Registry,p=ut("./id-resolution-job").IDResolutionJob,nt=ut("./version"),rt=ut("./util"),W=ut("./http"),et=rt.querystring,it=rt.withCB,z=rt.map,K=rt.merge,V=rt.get,Z=rt.set,G=rt.invoke,tt=rt.success,F=rt.error,C=rt.REQUIRES_VERSION,D=rt.dejoin,I={},s={},T={},v={},R={},P={},"http://",x="templates","lists",l="list/enrichment",B="listswithobject",d={union:"lists/union",intersection:"lists/intersect",difference:"lists/diff"},k="lists/subtract",q="user/whoami",(S="query/results")+"/tablerows",_="user/preferences","user/tokens","ids",n={},o=0,X=(Q=[N="version",O="version/release",a="classkeys",M="widgets","model",A="summaryfields","search",w="path/values"]).length;o<X;o++)n[Y=Q[o]]=!0;for(r={},u=0,J=($=[q,_,d,k,B,l,x,"user/tokens"]).length;u<J;u++)r[Y=$[u]]=!0;b=function(t,e){return!n[t]&&(!!r[t]||(null==e||!e.needsAuthentication||e.needsAuthentication()))},c=/^https?:\/\//i,f=/service\/?$/i,h=function(t){var e;return(null!=(e=console.error)?e:console.log)(t)},U=function(t,e,r,n,i){var o,s,a,u,h;return a=this.root,u=this.useCache,s=null!=this[t]?this[t]:this[t]=u&&(h=e[a])?tt(h):(o={type:"GET",dataType:"json",data:{format:"json"}},this.doReq(K(o,{url:this.root+r})).then(function(t){return e[a]=t[n]})),it(i,s)},H=function(i){return function(n){return new t(function(t,e){var r;return(r=rt.find(n,function(t){return t.name===i}))?t(r):e('List "'+i+'" not found among: '+n.map(V("name")))})}},y=function(t,e){return null==e&&(e="listName"),rt.compose(t.fetchList,V(e))},L=function(t){var e,r,n,i,o,s;for(null==t&&(t=[]),o=[],r=0,e=(n=rt.isArray(t)?t:[t]).length;r<e;r++)s=n[r],o.push(null!=(i=s.name)?i:s);return o},(i=function(){var n,i,o,u,r;function e(t){var e;if(this.root=t.root,this.token=t.token,this.errorHandler=t.errorHandler,this.DEBUG=t.DEBUG,this.help=t.help,e=t.noCache,this.headers=t.headers,this.connectAs=ot(this.connectAs,this),this.createList=ot(this.createList,this),this.resolveIds=ot(this.resolveIds,this),this.templateQuery=ot(this.templateQuery,this),this.savedQuery=ot(this.savedQuery,this),this.query=ot(this.query,this),this.fetchRelease=ot(this.fetchRelease,this),this.fetchClassKeys=ot(this.fetchClassKeys,this),this.fetchVersion=ot(this.fetchVersion,this),this.fetchSummaryFields=ot(this.fetchSummaryFields,this),this.fetchModel=ot(this.fetchModel,this),this.fetchWidgetMap=ot(this.fetchWidgetMap,this),this.fetchWidgets=ot(this.fetchWidgets,this),this.complement=ot(this.complement,this),this.fetchListsContaining=ot(this.fetchListsContaining,this),this.fetchList=ot(this.fetchList,this),this.findLists=ot(this.findLists,this),this.fetchLists=ot(this.fetchLists,this),this.fetchTemplates=ot(this.fetchTemplates,this),this.tableRows=ot(this.tableRows,this),this.values=ot(this.values,this),this.rows=ot(this.rows,this),this.records=ot(this.records,this),this.table=ot(this.table,this),this.pathValues=ot(this.pathValues,this),this.fetchUser=ot(this.fetchUser,this),this.whoami=ot(this.whoami,this),this.findById=ot(this.findById,this),this.count=ot(this.count,this),this.enrichment=ot(this.enrichment,this),null==this.root)throw new Error("No service root provided. This is required");c.test(this.root)||(this.root="http://"+this.root),f.test(this.root)||(this.root=this.root+"/service/"),this.root=this.root.replace(/ice$/,"ice/"),null==this.headers&&(this.headers=null),null==this.errorHandler&&(this.errorHandler=h),null==this.help&&(this.help="no.help.available@dev.null"),this.useCache=!e,this.getFormat=function(t){return null==t&&(t="json"),t}}return e.prototype.doReq=function(){return arguments[0]=this.attachCustomHeaders(arguments[0]),W.doReq.apply(this,arguments)},e.prototype.post=function(t,e){return this.makeRequest("POST",t,e)},e.prototype.get=function(t,e){return this.makeRequest("GET",t,e)},e.prototype.makeRequest=function(t,e,r,n,i){var o,s,a,u,h,l,c,f;return null==t&&(t="GET"),null==e&&(e=""),null==r&&(r={}),null==n&&(n=function(){}),null==i&&(i=!1),rt.isArray(n)&&(n=(u=n)[0],s=u[1]),rt.isArray(r)&&(r=rt.pairsToObj(r)),null==s&&(s=this.errorHandler),r=rt.copy(r),o=this.getFormat(r.format),W.supports(t)||(h=[t,W.getMethod(t)],r.method=h[0],t=h[1]),a={data:r,dataType:o,success:n,error:s,path:e,type:t},null!=r.auth&&(a.auth=r.auth,delete a.data.auth),null!=r.headers&&(a.headers=rt.copy(r.headers),delete a.data.headers),(c=null!=(l=r.timeout)?l:this.timeout)&&(a.timeout=c,delete r.timeout),this.authorise(a).then((f=this,function(t){return f.doReq(t,i)}))},e.prototype.authorise=function(i){return this.fetchVersion().then((o=this,function(t){var e,r,n;return null==(e=rt.copy(i)).headers&&(e.headers={}),e.url=o.root+e.path,r=[],t<14&&("string"==typeof e.data?r.push(["format",e.dataType]):e.data.format=e.dataType),null!=o.token&&b(i.path,null!=(n=e.data)?n.query:void 0)&&(14<=t?e.headers.Authorization="Token "+o.token:"string"==typeof e.data?r.push(["token",o.token]):e.data.token=o.token),r.length&&(e.url+="?"+et(r)),e}));var o},e.prototype.attachCustomHeaders=function(t){var e;return null!=this.headers?((e=rt.copy(t)).headers=rt.merge(e.headers,this.headers),e):t},e.prototype.enrichment=function(e,r){return C(this,8,(n=this,function(){var t;return t=K({maxp:.05,correction:"Holm-Bonferroni"},e),it(r,n.get(l,t).then(V("results")))}));var n},e.prototype.search=function(i,o){return null==i&&(i={}),null==o&&(o=function(){}),C(this,9,(s=this,function(){var t,e,r,n;if(rt.isFunction(i)&&(o=(e=[i,{}])[0],i=e[1]),"string"==typeof i)r={q:i};else for(t in r={q:i.q,start:i.start,size:i.size},i)st.call(i,t)&&(n=i[t],"q"!==t&&"start"!==t&&"size"!==t&&(r["facet_"+t]=n));return it(o,s.post("search",r))}));var s},e.prototype.makePath=function(e,r,t){return null==r&&(r={}),null==t&&(t=function(){}),it(t,this.fetchModel().then(function(t){return t.makePath(e,r)}))},e.prototype.count=function(e,t){var r,n,i;return null==t&&(t=function(){}),r=e?null!=e.toPathString?(Y=e.isClass()?e.append("id"):e,this.pathValues(Y,"count")):null!=e.toXML?(n={query:e,format:"jsoncount"},this.post(S,n).then(V("count"))):"string"==typeof e?this.fetchModel().then((i=this,function(t){try{return i.count(t.makePath(e))}catch(t){return i.query({select:[e]}).then(i.count)}})):this.query(e).then(this.count):F("Not enough arguments"),it(t,r)},e.prototype.findById=function(t,e,r,n){var i,o;return null==r&&(r=["**"]),null==n&&(n=function(){}),rt.isFunction(r)&&(r=(o=[["**"],r])[0],n=o[1]),i=this.query({from:t,select:r,where:{id:e}}).then(D).then(G("records")).then(V(0)),it(n,i)},e.prototype.lookup=function(t,e,r,n){var i,o;return rt.isFunction(r)&&(r=(o=[null,r])[0],n=o[1]),i=this.query({from:t,select:["**"],where:[[t,"LOOKUP",e,r]]}).then(D).then(G("records")),it(n,i)},e.prototype.find=function(t,e,r,n){var i;return rt.isFunction(r)&&(r=(i=[null,r])[0],n=i[1]),it(n,this.lookup(t,e,r).then(function(t){return null==t||0===t.length?F("Nothing found"):1<t.length?F("Multiple items found: "+t.slice(0,3)+"..."):tt(t[0])}))},e.prototype.whoami=function(t){return C(this,9,(e=this,function(){return it(t,e.get(q).then(V("user")).then(function(t){return new j(e,t)}))}));var e},e.prototype.fetchUser=function(){var t;return t=1<=arguments.length?at.call(arguments,0):[],this.whoami.apply(this,t)},u=function(t,e){return{format:t,path:String(e),typeConstraints:JSON.stringify(e.subclasses)}},e.prototype.pathValues=function(i,o,s){return null==o&&(o={}),C(this,6,(a=this,function(){var r,t,e,n;return"string"==typeof o&&(n=o,o={}),rt.isFunction(o)&&(o=(e=[s,o])[0],s=e[1]),"count"!==n&&(n="results"),r="count"===n?"jsoncount":"json",t=function(){var t,e;try{return this.fetchModel().then(G("makePath",i,null!=(t=i.subclasses)?t:o)).then(function(t){return u(r,t)}).then((e=this,function(t){return e.post(w,t)})).then(V(n))}catch(t){return F(t)}}.call(a),it(s,t)}));var a},e.prototype.doPagedRequest=function(t,e,r,n,i){var o,s,a;return null==r&&(r={}),null==i&&(i=function(){}),null!=t.toXML?(rt.isFunction(r)&&(i=(o=[r,{}])[0],r=o[1]),s=K(r,{query:t,format:n}),it(i,this.post(e,s).then(V("results")))):this.query(t).then((a=this,function(t){return a.doPagedRequest(t,e,r,n,i)}))},e.prototype.table=function(t,e,r){return this.doPagedRequest(t,S,e,"jsontable",r)},e.prototype.records=function(t,e,r){return this.doPagedRequest(t,S,e,"jsonobjects",r)},e.prototype.rows=function(t,e,r){return this.doPagedRequest(t,S,e,"json",r)},e.prototype.values=function(t,e,r){var n,i,o;return rt.isFunction(e)&&(r=(n=[e,r])[0],e=n[1]),i=null==t?F("No query term supplied"):null!=t.descriptors||"string"==typeof t?this.pathValues(t,e).then(z(V("value"))):null!=t.toXML?1!==t.views.length?F("Expected one column, got "+t.views.length):this.rows(t,e).then(z(V(0))):this.query(t).then((o=this,function(t){return o.values(t,e)})),it(r,i)},e.prototype.tableRows=function(t,e,r){return this.doPagedRequest(t,"query/results/tablerows",e,"json",r)},e.prototype.fetchTemplates=function(t){return it(t,this.get(x).then(V("templates")))},e.prototype.fetchLists=function(t){return this.findLists("",t)},e.prototype.findLists=function(r,n){return null==r&&(r=""),null==n&&(n=function(){}),this.fetchVersion().then((o=this,function(t){var e;return it(n,r&&t<13?F("Finding lists by name on the server requires version 13. This is only "+t):(e=function(t){var e,r,n,i;for(i=[],n=0,r=t.length;n<r;n++)e=t[n],i.push(new g(e,o));return i},o.get("lists",{name:r}).then(V("lists")).then(e)))}));var o},e.prototype.fetchList=function(e,r){return this.fetchVersion().then((n=this,function(t){return it(r,t<13?n.findLists().then(H(e)):n.findLists(e).then(V(0)))}));var n},e.prototype.fetchListsContaining=function(t,e){var r,o;return r=function(t){var e,r,n,i;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(new g(i,o));return n},it(e,(o=this).get(B,t).then(V("lists")).then(r))},e.prototype.combineLists=function(t,e,r){var n,i,o,s,a;return i=(o=K({lists:[],tags:[]},e)).name,n=o.lists,a=o.tags,null==(s={name:i,description:o.description}).description&&(s.description=t+" of "+n.join(", ")),s.tags=a.join(";"),s.lists=n.join(";"),it(r,this.get(d[t],s).then(y(this)))},e.prototype.merge=function(){return this.combineLists.apply(this,["union"].concat(at.call(arguments)))},e.prototype.intersect=function(){return this.combineLists.apply(this,["intersection"].concat(at.call(arguments)))},e.prototype.diff=function(){return this.combineLists.apply(this,["difference"].concat(at.call(arguments)))},e.prototype.complement=function(t,e){var r,n,i,o,s,a,u,h,l;return null==t&&(t={}),null==e&&(e=function(){}),o=t.from,i=t.exclude,a=t.name,n=t.description,l=t.tags,r=function(){return"Relative complement of "+s.join(" and ")+" in "+u.join(" and ")},u=L(o),s=L(i),null==a&&(a=r()),null==n&&(n=r()),null==l&&(l=[]),h={name:a,description:n,tags:l,lists:s,references:u},it(e,this.post(k,h).then(y(this)))},e.prototype.fetchWidgets=function(t){return C(this,8,(e=this,function(){return U.call(e,"widgets",P,M,"widgets",t)}));var e},r=rt.omap(function(t){return[t.name,t]}),e.prototype.fetchWidgetMap=function(t){return C(this,8,(e=this,function(){return it(t,null!=e.__wmap__?e.__wmap__:e.__wmap__=e.fetchWidgets().then(r))}));var e},e.prototype.fetchModel=function(t){var e;return e=U.call(this,"model",v,"model","model").then(m.load).then(Z({service:this})),it(t,e)},e.prototype.fetchSummaryFields=function(t){return U.call(this,"summaryFields",R,A,"classes",t)},e.prototype.fetchVersion=function(t){return U.call(this,"version",I,N,"version",t)},e.prototype.fetchClassKeys=function(t){return U.call(this,"classkeys",s,a,"classes",t)},e.prototype.fetchRelease=function(t){return U.call(this,"release",T,O,"version",t)},e.prototype.query=function(n,t){var e,i;return i=this,e=function(t){var e,r;return e=t[0],r=t[1],new E(n,i,{model:e,summaryFields:r})},it(t,rt.parallel(this.fetchModel(),this.fetchSummaryFields()).then(e))},o=function(e,r){return function(t){return t?e.query(t):F("No query found called "+r)}},n=function(t){return t?"string"==typeof t?tt():F("Name must be a string"):F("Name not provided")},e.prototype.savedQuery=function(e,t){return C(this,16,(r=this,function(){return n(e).then(function(){return it(t,r.get("user/queries",{filter:e}).then(function(t){return t.queries[e]}).then(o(r,e)))})}));var r},e.prototype.templateQuery=function(t,e){return n(t).then((r=this,function(){return it(e,r.fetchTemplates().then(V(t)).then(Z("type","TEMPLATE")).then(o(r,t)))}));var r},e.prototype.manageUserPreferences=function(t,e,r){return C(this,11,(n=this,function(){return it(r,n.makeRequest(t,_,e).then(V("preferences")))}));var n},e.prototype.resolveIds=function(e,r){return C(this,10,(n=this,function(){var t;return t={type:"POST",url:n.root+"ids",contentType:"application/json",data:JSON.stringify(e),dataType:"json"},it(r,n.doReq(t).then(V("uid")).then(p.create(n)))}));var n},e.prototype.resolutionJob=function(t){return p.create(this)(t)},e.prototype.createList=function(e,t,r){var n,i,o;return null==e&&(e={}),null==t&&(t=""),null==r&&(r=function(){}),o=this,n=function(t){return K(t,{token:o.token,tags:e.tags||[]})},i={data:rt.isArray(t)?t.map(function(t){return'"'+t+'"'}).join("\n"):t,dataType:"json",url:this.root+"lists?"+et(n(e)),type:"POST",contentType:"text/plain"},it(r,this.doReq(i).then(y(this)))},i=function(t){return t.user.temporaryToken},e.prototype.connectAs=function(t){return e.connect(K(this,{token:t,noCache:!this.useCache}))},e.prototype.register=function(t,e,r){return C(this,9,(n=this,function(){return it(r,n.post("users",{name:t,password:e}).then(i).then(n.connectAs))}));var n},300,e.prototype.getDeregistrationToken=function(e,r){return null==e&&(e=300),C(this,16,(n=this,function(){var t;return t=null!=n.token?n.post("user/deregistration",{validity:e}).then(V("token")):F("Not registered"),it(r,t)}));var n},e.prototype.deregister=function(t,e){return C(this,16,(r=this,function(){return it(e,r.makeRequest("DELETE","user",{deregistrationToken:t,format:"xml"}))}));var r},e.prototype.login=function(t,r,n){return C(this,9,(i=this,function(){var e;return e=t+":"+r,it(n,i.logout().then(function(t){return t.get("user/token",{auth:e})})).then(V("token")).then(i.connectAs)}));var i},e.prototype.logout=function(t){return it(t,tt(this.connectAs()))},e}()).prototype.rowByRow=function(){var e,t,r,n;return r=arguments[0],e=2<=arguments.length?at.call(arguments,1):[],t=W.iterReq("POST",S,"json"),null!=r.toXML?t.apply(this,arguments):this.query(r).then((n=this,function(t){return n.rowByRow.apply(n,[t].concat(at.call(e)))}))},i.prototype.eachRow=i.prototype.rowByRow,i.prototype.recordByRecord=function(){var e,t,r,n;return r=arguments[0],e=2<=arguments.length?at.call(arguments,1):[],t=W.iterReq("POST",S,"jsonobjects"),null!=r.toXML?t.apply(this,arguments):this.query(r).then((n=this,function(t){return n.recordByRecord.apply(n,[t].concat(at.call(e)))}))},i.prototype.eachRecord=i.prototype.recordByRecord,i.prototype.union=i.prototype.merge,i.prototype.difference=i.prototype.diff,i.prototype.symmetricDifference=i.prototype.diff,i.prototype.relativeComplement=i.prototype.complement,i.prototype.subtract=i.prototype.complement,i.flushCaches=function(){return v={},I={},T={},s={},R={},P={}},i.connect=function(t){if(null==(null!=t?t.root:void 0))throw new Error("Invalid options provided: "+JSON.stringify(t));return new i(t)},ht.Service=i,ht.Model=m,ht.Query=E,ht.Registry=e,ht.utils=rt,ht.VERSION=nt.VERSION,ht.imjs=nt}).call(this)},{"./http":3,"./id-resolution-job":4,"./lists":5,"./model":6,"./promise":8,"./query":9,"./registry":10,"./user":15,"./util":16,"./version":17}],12:[function(t,e,r){(function(t){(function(){r.DOMParser=null!=t.DOMParser?t.DOMParser:function(){throw new Error("DOMParser is not available")}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(t,e,r){(function(){var t,e,s,r,a,u,n,i,o,h;if(t="undefined"!=typeof console,e="undefined"!=typeof JSON,s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e||((h=document.createElement("script")).src="http://cdn.intermine.org/js/json3/3.2.2/json3.min.js",h.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(h)),null==Object.keys&&(u=Object.prototype.hasOwnProperty,a=!{toString:null}.propertyIsEnumerable("toString"),Object.keys=function(e){var t,r,n,i,o;if("object"!=typeof e&&""!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");if(r=function(){var t;for(i in t=[],e)u.call(e,i)&&t.push(i);return t}(),a)for(t=0,n=s.length;t<n;t++)o=s[t],u.call(e,o)&&r.push(o);return r}),null==Array.prototype.map&&(Array.prototype.map=function(t){var e,r,n,i;for(n=[],e=0,r=this.length;e<r;e++)i=this[e],n.push(t(i));return n}),null==Array.prototype.filter&&(Array.prototype.filter=function(t){var e,r,n,i;for(n=[],e=0,r=this.length;e<r;e++)t(i=this[e])&&n.push(i);return n}),null==Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){var r,n,i,o;for(o=this.slice(),i=arguments.length<2?o.pop():e,r=0,n=o.length;r<n;r++)i=t(i,o[r]);return i}),null==Array.prototype.forEach&&(Array.prototype.forEach=function(t,e){var r,n,i,o,s;if(!t)throw new Error("No function provided");for(o=[],r=n=0,i=this.length;n<i;r=++n)s=this[r],o.push(t.call(null!=e?e:this,s,r,this));return o}),t||(this.console={log:function(){},error:function(){},debug:function(){}},"undefined"!=typeof window&&null!==window&&(window.console=this.console)),null==console.log&&(console.log=function(){}),null==console.error&&(console.error=function(){}),null==console.debug&&(console.debug=function(){}),null==console.log.apply)for(console.log("Your console needs patching."),r=function(t){var e;return e=console[t],console[t]=function(t){return e(t)}},n=0,i=(o=["log","error","debug"]).length;n<i;n++)r(o[n])}).call(this)},{}],14:[function(t,e,r){(function(){var e,u,h;u=function(t,e){var r,n,i;for(r in n=[],t)i=t[r],n.push(e[r]=i);return n},e=t("./promise"),h=["attributes","references","collections"],r.Table=function(){function t(t,e){var r,n,i,o,s,a;for(this.model=e,this.getDisplayName=function(t,e){return function(){return t.apply(e,arguments)}}(this.getDisplayName,this),this.name=t.name,this.tags=t.tags,this.displayName=t.displayName,this.attributes=t.attributes,this.references=t.references,this.collections=t.collections,this.fields={},this.__parents__=null!=(s=t.extends)?s:[],n=0,i=h.length;n<i;n++){if(null==this[o=h[n]])throw new Error("Bad model data: missing "+o);u(this[o],this.fields)}for(r in a=this.collections)a[r].isCollection=!0}return t.prototype.toString=function(){var r;return"[Table name="+this.name+", fields=["+function(){var t,e;for(r in e=[],t=this.fields)t[r],e.push(r);return e}.call(this)+"]]"},t.prototype.parents=function(){var t;return(null!=(t=this.__parents__)?t:[]).slice()},t.prototype.getDisplayName=function(){return new e((r=this,function(t,e){return null!=r.model?t(r.model.makePath(r.name).getDisplayName()):e(new Error("model not set - cannot make path"))}));var r},t}()}).call(this)},{"./promise":8}],15:[function(e,t,i){(function(){var o,r,s,a,u,t,h,n=function(t,e){return function(){return t.apply(e,arguments)}};t=e("./util"),h=t.withCB,a=t.get,u=t.isFunction,o=t.any,s=t.error,r=function(e,t,r,n){return e.service.manageUserPreferences(r,t,n).then(function(t){return e.preferences=t})},i.User=function(){function t(t,e){this.service=t,this.username=e.username,this.preferences=e.preferences,this.refresh=n(this.refresh,this),this.clearPreferences=n(this.clearPreferences,this),this.clearPreference=n(this.clearPreference,this),this.setPreferences=n(this.setPreferences,this),this.setPreference=n(this.setPreference,this),this.hasPreferences=null!=this.preferences,null==this.preferences&&(this.preferences={})}return t.prototype.setPreference=function(t,e,r){var n,i;if(u(e)&&(e=(i=[null,e])[0],r=i[1]),"string"==typeof t)(n={})[t]=e;else{if(null!=e)return h(r,s("Incorrect arguments to setPreference"));n=t}return this.setPreferences(n,r)},t.prototype.setPreferences=function(t,e){return r(this,t,"POST",e)},t.prototype.clearPreference=function(t,e){return r(this,{key:t},"DELETE",e)},t.prototype.clearPreferences=function(t){return r(this,{},"DELETE",t)},t.prototype.refresh=function(t){return r(this,{},"GET",t)},t.prototype.createToken=function(t,e,r){var n,i;return null==t&&(t="day"),null==r&&o([t,e],u)&&(u(t)?(t=(n=[null,null,t])[0],e=n[1],r=n[2]):u(e)&&(e=(i=[null,e])[0],r=i[1])),h(r,this.service.post("user/tokens",{type:t,message:e}).then(a("token")))},t.prototype.fetchCurrentTokens=function(t){return h(t,this.service.get("user/tokens").then(a("tokens")))},t.prototype.revokeAllTokens=function(t){return h(t,this.service.makeRequest("DELETE","user/tokens"))},t.prototype.revokeToken=function(t,e){return h(e,this.service.makeRequest("DELETE","user/tokens/"+t))},t}()}).call(this)},{"./util":16}],16:[function(E,t,T){(function(){var e,n,r,u,o,a,i,h,l,s,c,f,p,d,y,g,t,v,m,b,w=[].slice,_=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},S={}.hasOwnProperty;e=E("./promise"),(v=T).defer=function(){var r;return(r={}).promise=new e(function(t,e){return r.resolve=t,r.reject=e}),r},o=function(t){return encodeURIComponent(String(t))},g=function(n){var i;return function(){var t,e,r;for(r=[],t=0,e=n.length;t<e;t++)i=n[t],r.push(i.map(o).join("="));return r}().join("&")},v.querystring=function(t){var n,i,o,e,s,a;if(!t)return"";if(p(t))o=t.slice();else for(n in o=[],t)a=t[n],p(a)?(e=function(){var t,e,r;for(r=[],t=0,e=a.length;t<e;t++)s=a[t],r.push([n,s]);return r}(),o=o.concat(e)):o.push([n,a]);return g(function(){var t,e,r;for(r=[],t=0,e=o.length;t<e;t++)null!=(i=o[t])[1]&&r.push(i);return r}())},v.curry=u=function(){var e,r;return r=arguments[0],e=2<=arguments.length?w.call(arguments,1):[],function(){var t;return t=1<=arguments.length?w.call(arguments,0):[],r.apply(null,e.concat(t))}},v.error=i=function(r){return new e(function(t,e){return e(new Error(r))})},v.success=m=function(r){return new e(function(t,e){return t(r)})},v.parallel=function(){var t;return 1===(t=1<=arguments.length?w.call(arguments,0):[]).length&&!t[0].then&&t[0].length?e.all(t[0]):e.all(t)},v.withCB=function(){var t,e,r,n,i,o,s,a;for(e=2<=arguments.length?w.call(arguments,0,r=arguments.length-1):(r=0,[]),a=arguments[r++],n=0,i=e.length;n<i;n++)null!=(t=e[n])&&(s=u(t,null),o=t,a.then(s,o));return a},v.fold=l=function(o){return function(t,e){var r,n,i;if(1===arguments.length&&(t=(null!=(e=(null!=t?t.slice():void 0)||t)?e.shift():void 0)||{}),null==e)throw new Error("xs is null");if(null!=e.reduce)return e.reduce(o,t);for(r in n=t,e)i=e[r],n=null!=n?o(n,r,i):{k:i};return n}},v.take=function(e){return function(t){return null!=e?t.slice(0,+(e-1)+1||9e9):t.slice()}},v.filter=function(o){return function(t){var e,r,n,i;for(n=[],e=0,r=t.length;e<r;e++)i=t[e],o(i)&&n.push(i);return n}},v.uniqBy=function(t,e){var r,n,i,o,s,a;if(1===arguments.length)return u(v.uniqBy,t);if(i=[],s=[],null==e)return s;for(r=0,o=e.length;r<o;r++)n=t(a=e[r]),_.call(i,n)<0&&(i.push(n),s.push(a));return s},v.find=function(t,e){var r,n,i;if(1===arguments.length)return e=t,function(t){return v.find(t,e)};for(r=0,n=t.length;r<n;r++)if(i=t[r],e(i))return i;return null},p=null!=(t=Array.isArray)?t:function(t){return null!=(null!=t?t.splice:void 0)&&null!=(null!=t?t.push:void 0)&&null!=(null!=t?t.pop:void 0)&&null!=(null!=t?t.slice:void 0)},v.isArray=p,v.isFunction="function"!=typeof/./?function(t){return"function"==typeof t}:function(t){return null!=t&&null!=t.call&&null!=t.apply&&"[object Function]"===t.toString()},a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},v.escape=function(t){var e,r,n,i,o,s;if(null==t)return"";for(o=[],r=n=0,i=(s=String(t).replace(/[&<>"']/g,function(t){return a[t]})).length;0<=i?n<=i:i<=n;r=0<=i?++n:--n)256<(e=s.charCodeAt(r))?o.push("&#"+e+";"):o.push(s.charAt(r));return o.join("")},v.omap=function(s){var e;return e=l(function(t,e,r){var n,i,o;return n=(o=s(e,r))[0],i=o[1],p(i)&&(i=i.slice()),t[n]=i,t}),function(t){return e({},t)}},v.copy=v.omap(function(t,e){return[t,e]}),v.partition=function(i){return function(t){return l(function(t,e){var r,n;return n=t[0],r=t[1],i(e)?[n.concat([e]),r]:[n,r.concat([e])]})([[],[]],t)}},v.merge=function(t,e){return extend(extend({},t),e)},v.extend=function(t,e){var r,n,i;for(r in n=[],e)i=e[r],n.push(t[r]=i);return n},v.id=s=function(t){return t},v.concatMap=function(s){return function(t){var e,r,n,i,o;for(i=void 0,r=0,n=t.length;r<n;r++)o=t[r],e=s(o),i=void 0===i?e:"number"==typeof i?i+e:null!=i.concat?i.concat(e):d(i,e);return i}},v.map=function(t){return c("map",t)},r=l(function(e,r){return function(){var t;return t=1<=arguments.length?w.call(arguments,0):[],e(r.apply(null,t))}}),v.compose=function(){var t;return t=1<=arguments.length?w.call(arguments,0):[],r(t)},v.flatMap=v.concatMap,v.difference=function(t,e){var r,n,i,o;for(i=[],r=0,n=t.length;r<n;r++)o=t[r],_.call(e,o)<0&&i.push(o);return i},v.stringList=function(t){return"string"==typeof t?[t]:t},v.flatten=h=function(){var t,e,r,n,i,o,s,a,u;for(o=[],t=0,r=(a=1<=arguments.length?w.call(arguments,0):[]).length;t<r;t++)if(s=a[t],p(s))for(e=0,n=(i=h.apply(null,s)).length;e<n;e++)u=i[e],o.push(u);else o.push(s);return o},v.sum=v.concatMap(s),v.merge=d=function(){var t,e,r,n,i,o,s;for(n={},t=0,r=(o=1<=arguments.length?w.call(arguments,0):[]).length;t<r;t++)for(e in i=o[t])S.call(i,e)&&(s=i[e],n[e]=s);return n},v.any=function(t,e){var r,n;for(null==e&&(e=s),r=0,n=t.length;r<n;r++)if(e(t[r]))return!0;return!1},v.invoke=c=function(){var t,e;return e=arguments[0],t=2<=arguments.length?w.call(arguments,1):[],f(e,t)},v.invokeWith=f=function(e,r,n){return null==r&&(r=[]),null==n&&(n=null),function(t){if(null==t)throw new Error('Cannot call method "'+e+'" of null');if(t[e])return t[e].apply(n||t,r);throw new Error('Cannot call undefined method "'+e+" of "+t)}},v.get=function(e){return function(t){return t[e]}},v.set=function(n,i){return function(t){var e,r;if(2===arguments.length)t[n]=i;else for(e in n)S.call(n,e)&&(r=n[e],t[e]=r);return t}},n=function(t,e){return"This service requires a service at version "+t+" or above. This one is at "+e},v.REQUIRES_VERSION=function(t,e,r){return t.fetchVersion().then(function(t){return e<=t?r():i(n(e,t))})},v.dejoin=function(t){var e,r,n,i;for(e=0,r=(i=t.views).length;e<r;e++)2<(n=i[e].split(".")).length&&t.addJoin(n.slice(1,-1).join("."));return t},b=l(function(t,e){return t.then(e)}),v.sequence=function(){var t;return t=1<=arguments.length?w.call(arguments,0):[],b(m(),t)},y=l(function(t,e){var r,n;if(r=e[0],n=e[1],null!=t[r])throw new Error("Duplicate key: "+r);return t[r]=n,t}),v.pairsToObj=function(t){return y({},t)}}).call(this)},{"./promise":8}],17:[function(t,e,r){(function(){r.VERSION="3.16.0"}).call(this)},{}],18:[function(t,e,i){(function(){var r,n;r=t("xmldom").DOMParser,n=function(t){return 0===(t=(t=t.replace(/^\s*/g,"")).replace(/\s$/g,"")).length?t:">"!==t[t.length-1]?t+">":t},i.parse=function(t){var e;if("string"!=typeof t)throw new Error("Expected a string - got "+t);if(!(t=n(t)))throw new Error("Expected content - got empty string");if(!(e=function(){try{return(new r).parseFromString(t,"text/xml")}catch(t){}}())||!e.documentElement||e.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return e}}).call(this)},{xmldom:12}],19:[function(r,t,n){(function(e){"use strict";var t=r("jsonparse"),u=r("through"),i=e.from&&e.from!==Uint8Array.from;function g(t,e){return"string"==typeof t?e==t:t&&"function"==typeof t.exec?t.exec(e):"boolean"==typeof t||"object"==typeof t?t:"function"==typeof t&&t(e)}n.parse=function(c,f){var p,r,n=new t,d=u(function(t){"string"==typeof t&&(t=i?e.from(t):new e(t)),n.write(t)},function(t){t&&d.write(t),p&&d.emit("header",p),r&&d.emit("footer",r),d.queue(null)});"string"==typeof c&&(c=c.split(".").map(function(t){return"$*"===t?{emitKey:!0}:"*"===t||(""===t?{recurse:!0}:t)}));return c&&c.length||(c=null),n.onValue=function(t){if(this.root||(d.root=t),c){for(var e=0,r=0,n=!1,i=!1;e<c.length;){var o,s=c[e];if(r++,s&&!s.recurse){if(!(o=r===this.stack.length?this:this.stack[r]))return;if(!g(s,o.key))return void y(o.key,t);n=!!s.emitKey,i=!!s.emitPath,e++}else{var a=c[++e];if(!a)return;for(;;){if(!(o=r===this.stack.length?this:this.stack[r]))return;if(g(a,o.key)){e++,Object.isFrozen(this.stack[r])||(this.stack[r].value=null);break}y(o.key,t),r++}}}if(p&&(d.emit("header",p),p=!1),r===this.stack.length){0;var u=this.stack.slice(1).map(function(t){return t.key}).concat([this.key]),h=t;for(var l in null!=h&&null!=(h=f?f(h,u):h)&&((n||i)&&(h={value:h},n&&(h.key=this.key),i&&(h.path=u)),d.queue(h)),this.value&&delete this.value[this.key],this.stack)Object.isFrozen(this.stack[l])||(this.stack[l].value=null)}}},n._onToken=n.onToken,n.onToken=function(t,e){n._onToken(t,e),0===this.stack.length&&d.root&&(c||d.queue(d.root),0,d.root=null)},n.onError=function(t){-1<t.message.indexOf("at position")&&(t.message="Invalid JSON ("+t.message+")"),d.emit("error",t)},d;function y(t,e){!1!==p&&((p=p||{})[t]=e),!1!==r&&!1===p&&((r=r||{})[t]=e)}},n.stringify=function(r,n,e,i){i=i||0,!1===r?(n="\n",e=r=""):null==r&&(r="[\n",n="\n,\n",e="\n]\n");var o,s=!0,a=!1;return o=u(function(t){a=!0;try{var e=JSON.stringify(t,null,i)}catch(t){return o.emit("error",t)}s?(s=!1,o.queue(r+e)):o.queue(n+e)},function(t){a||o.queue(r),o.queue(e),o.queue(null)})},n.stringifyObject=function(r,n,e,i){i=i||0,!1===r?(n="\n",e=r=""):null==r&&(r="{\n",n="\n,\n",e="\n}\n");var o=!0,s=!1;return u(function(t){s=!0;var e=JSON.stringify(t[0])+":"+JSON.stringify(t[1],null,i);o?(o=!1,this.queue(r+e)):this.queue(n+e)},function(t){s||this.queue(r),this.queue(e),this.queue(null)})}}).call(this,r("buffer").Buffer)},{buffer:24,jsonparse:33,through:60}],20:[function(t,a,h){!function(){var s=Array.prototype.forEach,r=Object.prototype.hasOwnProperty,i=Array.prototype.slice,n=0;var e,c={keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,r=[];for(e in t)t.hasOwnProperty(e)&&(r[r.length]=e);return r},uniqueId:function(t){var e=++n+"";return t?t+e:e},has:function(t,e){return r.call(t,e)},each:function(t,e,r){if(null!=t)if(s&&t.forEach===s)t.forEach(e,r);else if(t.length===+t.length)for(var n=0,i=t.length;n<i;n++)e.call(r,t[n],n,t);else for(var o in t)this.has(t,o)&&e.call(r,t[o],o,t)},once:function(t){var e,r=!1;return function(){return r||(r=!0,e=t.apply(this,arguments),t=null),e}}};e={on:function(t,e,r){return f(this,"on",t,[e,r])&&e&&(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:r,ctx:r||this})),this},once:function(t,e,r){if(!f(this,"once",t,[e,r])||!e)return this;var n=this,i=c.once(function(){n.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,r)},off:function(t,e,r){var n,i,o,s,a,u,h,l;if(!this._events||!f(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events={},this;for(a=0,u=(s=t?[t]:c.keys(this._events)).length;a<u;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=n=[],e||r)for(h=0,l=o.length;h<l;h++)i=o[h],(e&&e!==i.callback&&e!==i.callback._callback||r&&r!==i.context)&&n.push(i);n.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=i.call(arguments,1);if(!f(this,"trigger",t,e))return this;var r=this._events[t],n=this._events.all;return r&&o(r,e),n&&o(n,arguments),this},stopListening:function(t,e,r){var n=this._listeners;if(!n)return this;var i=!e&&!r;for(var o in"object"==typeof e&&(r=this),t&&((n={})[t._listenerId]=t),n)n[o].off(e,r,this),i&&delete this._listeners[o];return this}};var u=/\s+/,f=function(t,e,r,n){if(!r)return!0;if("object"==typeof r){for(var i in r)t[e].apply(t,[i,r[i]].concat(n));return!1}if(u.test(r)){for(var o=r.split(u),s=0,a=o.length;s<a;s++)t[e].apply(t,[o[s]].concat(n));return!1}return!0},o=function(t,e){var r,n=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++n<i;)(r=t[n]).callback.call(r.ctx);return;case 1:for(;++n<i;)(r=t[n]).callback.call(r.ctx,o);return;case 2:for(;++n<i;)(r=t[n]).callback.call(r.ctx,o,s);return;case 3:for(;++n<i;)(r=t[n]).callback.call(r.ctx,o,s,a);return;default:for(;++n<i;)(r=t[n]).callback.apply(r.ctx,e)}};c.each({listenTo:"on",listenToOnce:"once"},function(i,t){e[t]=function(t,e,r){var n=this._listeners||(this._listeners={});return"object"==typeof e&&(r=this),(n[t._listenerId||(t._listenerId=c.uniqueId("l"))]=t)[i](e,r,this),this}}),e.bind=e.on,e.unbind=e.off,e.mixin=function(e){return c.each(["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"],function(t){e[t]=this[t]},this),e},void 0!==h?(void 0!==a&&a.exports&&(h=a.exports=e),h.BackboneEvents=e):this.BackboneEvents=e}()},{}],21:[function(t,e,r){e.exports=t("./backbone-events-standalone")},{"./backbone-events-standalone":20}],22:[function(t,e,r){"use strict";r.byteLength=function(t){var e=c(t),r=e[0],n=e[1];return 3*(r+n)/4-n},r.toByteArray=function(t){for(var e,r=c(t),n=r[0],i=r[1],o=new l(function(t,e,r){return 3*(e+r)/4-r}(0,n,i)),s=0,a=0<i?n-4:n,u=0;u<a;u+=4)e=h[t.charCodeAt(u)]<<18|h[t.charCodeAt(u+1)]<<12|h[t.charCodeAt(u+2)]<<6|h[t.charCodeAt(u+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=255&e;2===i&&(e=h[t.charCodeAt(u)]<<2|h[t.charCodeAt(u+1)]>>4,o[s++]=255&e);1===i&&(e=h[t.charCodeAt(u)]<<10|h[t.charCodeAt(u+1)]<<4|h[t.charCodeAt(u+2)]>>2,o[s++]=e>>8&255,o[s++]=255&e);return o},r.fromByteArray=function(t){for(var e,r=t.length,n=r%3,i=[],o=0,s=r-n;o<s;o+=16383)i.push(u(t,o,s<o+16383?s:o+16383));1==n?(e=t[r-1],i.push(a[e>>2]+a[e<<4&63]+"==")):2==n&&(e=(t[r-2]<<8)+t[r-1],i.push(a[e>>10]+a[e>>4&63]+a[e<<2&63]+"="));return i.join("")};for(var a=[],h=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)a[i]=n[i],h[n.charCodeAt(i)]=i;function c(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function u(t,e,r){for(var n,i,o=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(a[(i=n)>>18&63]+a[i>>12&63]+a[i>>6&63]+a[63&i]);return o.join("")}h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},{}],23:[function(t,e,r){},{}],24:[function(t,e,P){(function(c){"use strict";var n=t("base64-js"),o=t("ieee754");P.Buffer=c,P.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},P.INSPECT_MAX_BYTES=50;var r=2147483647;function s(t){if(r<t)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=c.prototype,e}function c(t,e,r){if("number"!=typeof t)return i(t,e,r);if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}function i(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|f(t,e),n=s(r),i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e);if(ArrayBuffer.isView(t))return h(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(N(t,ArrayBuffer)||t&&N(t.buffer,ArrayBuffer))return function(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r);return n.__proto__=c.prototype,n}(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return c.from(n,e,r);var i=function(t){if(c.isBuffer(t)){var e=0|l(t.length),r=s(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||q(t.length)?s(0):h(t);if("Buffer"===t.type&&Array.isArray(t.data))return h(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return a(t),s(t<0?0:0|l(t))}function h(t){for(var e=t.length<0?0:0|l(t.length),r=s(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function l(t){if(r<=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|t}function f(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||N(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return L(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(t).length;default:if(i)return n?-1:L(t).length;e=(""+e).toLowerCase(),i=!0}}function p(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function d(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),q(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:y(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):y(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,r,n,i){var o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a/=s=2,u/=2,r/=2}function h(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=r;o<a;o++)if(h(t,o)===h(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(a<r+u&&(r=a-u),o=r;0<=o;o--){for(var c=!0,f=0;f<u;f++)if(h(t,o+f)!==h(e,f)){c=!1;break}if(c)return o}return-1}function g(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?i<(n=Number(n))&&(n=i):n=i;var o=e.length;o/2<n&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(q(a))return s;t[r+s]=a}return s}function v(t,e,r,n){return I(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function m(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function b(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,u,h=t[i],l=null,c=239<h?4:223<h?3:191<h?2:1;if(i+c<=r)switch(c){case 1:h<128&&(l=h);break;case 2:128==(192&(o=t[i+1]))&&127<(u=(31&h)<<6|63&o)&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&2047<(u=(15&h)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,c=1):65535<l&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=c}return function(t){var e=t.length;if(e<=w)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=w));return r}(n)}P.kMaxLength=r,(c.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192,c.from=function(t,e,r){return i(t,e,r)},c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,c.alloc=function(t,e,r){return function(t,e,r){return a(t),t<=0?s(t):void 0!==e?"string"==typeof r?s(t).fill(e,r):s(t).fill(e):s(t)}(t,e,r)},c.allocUnsafe=function(t){return u(t)},c.allocUnsafeSlow=function(t){return u(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(N(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),N(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var r;if(void 0===e)for(r=e=0;r<t.length;++r)e+=t[r].length;var n=c.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(N(o,Uint8Array)&&(o=c.from(o)),!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},c.prototype.toLocaleString=c.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?b(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return E(this,e,r);case"utf8":case"utf-8":return b(this,e,r);case"ascii":return _(this,e,r);case"latin1":case"binary":return S(this,e,r);case"base64":return m(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",e=P.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},c.prototype.compare=function(t,e,r,n,i){if(N(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=e)return 0;if(i<=n)return-1;if(r<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(n,i),h=t.slice(e,r),l=0;l<a;++l)if(u[l]!==h[l]){o=u[l],s=h[l];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},c.prototype.indexOf=function(t,e,r){return d(this,t,e,r,!0)},c.prototype.lastIndexOf=function(t,e,r){return d(this,t,e,r,!1)},c.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||i<r)&&(r=i),0<t.length&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o,s,a,u,h,l,c,f,p,d=!1;;)switch(n){case"hex":return g(this,t,e,r);case"utf8":case"utf-8":return f=e,p=r,I(L(t,(c=this).length-f),c,f,p);case"ascii":return v(this,t,e,r);case"latin1":case"binary":return v(this,t,e,r);case"base64":return u=this,h=e,l=r,I(j(t),u,h,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s=e,a=r,I(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,(o=this).length-s),o,s,a);default:if(d)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),d=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function _(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function S(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function E(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||n<r)&&(r=n);for(var i="",o=e;o<r;++o)i+=x(t[o]);return i}function T(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function O(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+e)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,r,n,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function k(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function A(t,e,r,n,i){return e=+e,r>>>=0,i||k(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function R(t,e,r,n,i){return e=+e,r>>>=0,i||k(t,0,r,8),o.write(t,e,r,n,52,8),r+8}c.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return n.__proto__=c.prototype,n},c.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||O(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},c.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||O(t,e,this.length);for(var n=this[t+--e],i=1;0<e&&(i*=256);)n+=this[t+--e]*i;return n},c.prototype.readUInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||O(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*e)),n},c.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||O(t,e,this.length);for(var n=e,i=1,o=this[t+--n];0<n&&(i*=256);)o+=this[t+--n]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||O(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(t,e){t>>>=0,e||O(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return t>>>=0,e||O(t,4,this.length),o.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||O(t,4,this.length),o.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||O(t,8,this.length),o.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||O(t,8,this.length),o.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||C(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},c.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||C(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+r},c.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);C(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},c.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);C(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;0<=--o&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},c.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeFloatLE=function(t,e,r){return A(this,t,e,!0,r)},c.prototype.writeFloatBE=function(t,e,r){return A(this,t,e,!1,r)},c.prototype.writeDoubleLE=function(t,e,r){return R(this,t,e,!0,r)},c.prototype.writeDoubleBE=function(t,e,r){return R(this,t,e,!1,r)},c.prototype.copy=function(t,e,r,n){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),0<n&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var o=i-1;0<=o;--o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return i},c.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=c.isBuffer(t)?t:c.from(t,n),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var e=/[^+/0-9A-Za-z-_]/g;function x(t){return t<16?"0"+t.toString(16):t.toString(16)}function L(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if(55295<(r=t.charCodeAt(s))&&r<57344){if(!i){if(56319<r){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===n){-1<(e-=3)&&o.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(e-=3)&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function j(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(e,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function I(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function N(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function q(t){return t!=t}}).call(this,t("buffer").Buffer)},{"base64-js":22,buffer:24,ieee754:29}],25:[function(t,e,r){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],26:[function(t,e,r){(function(t){function e(t){return Object.prototype.toString.call(t)}r.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},r.isBoolean=function(t){return"boolean"==typeof t},r.isNull=function(t){return null===t},r.isNullOrUndefined=function(t){return null==t},r.isNumber=function(t){return"number"==typeof t},r.isString=function(t){return"string"==typeof t},r.isSymbol=function(t){return"symbol"==typeof t},r.isUndefined=function(t){return void 0===t},r.isRegExp=function(t){return"[object RegExp]"===e(t)},r.isObject=function(t){return"object"==typeof t&&null!==t},r.isDate=function(t){return"[object Date]"===e(t)},r.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},r.isFunction=function(t){return"function"==typeof t},r.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},r.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":31}],27:[function(V,r,n){(function(D,F){var t,e;t=this,e=function(){"use strict";function h(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=0,e=void 0,i=void 0,s=function(t,e){f[n]=t,f[n+1]=e,2===(n+=2)&&(i?i(p):m())};var t="undefined"!=typeof window?window:void 0,o=t||{},a=o.MutationObserver||o.WebKitMutationObserver,u="undefined"==typeof self&&void 0!==D&&"[object process]"==={}.toString.call(D),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function c(){var t=setTimeout;return function(){return t(p,1)}}var f=new Array(1e3);function p(){for(var t=0;t<n;t+=2){(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0}n=0}var d,y,g,v,m=void 0;function b(t,e){var r=this,n=new this.constructor(S);void 0===n[_]&&M(n);var i=r._state;if(i){var o=arguments[i-1];s(function(){return q(i,n,o,r._result)})}else I(r,n,t,e);return n}function w(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(S);return R(e,t),e}m=u?function(){return D.nextTick(p)}:a?(y=0,g=new a(p),v=document.createTextNode(""),g.observe(v,{characterData:!0}),function(){v.data=y=++y%2}):l?((d=new MessageChannel).port1.onmessage=p,function(){return d.port2.postMessage(0)}):void 0===t&&"function"==typeof V?function(){try{var t=Function("return this")().require("vertx");return void 0!==(e=t.runOnLoop||t.runOnContext)?function(){e(p)}:c()}catch(t){return c()}}():c();var _=Math.random().toString(36).substring(2);function S(){}var E=void 0,T=1,O=2,C={error:null};function k(t){try{return t.then}catch(t){return C.error=t,C}}function A(t,e,r){e.constructor===t.constructor&&r===b&&e.constructor.resolve===w?function(e,t){t._state===T?L(e,t._result):t._state===O?j(e,t._result):I(t,void 0,function(t){return R(e,t)},function(t){return j(e,t)})}(t,e):r===C?(j(t,C.error),C.error=null):void 0===r?L(t,e):h(r)?function(t,n,i){s(function(e){var r=!1,t=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(i,n,function(t){r||(r=!0,n!==t?R(e,t):L(e,t))},function(t){r||(r=!0,j(e,t))},e._label);!r&&t&&(r=!0,j(e,t))},t)}(t,e,r):L(t,e)}function R(t,e){t===e?j(t,new TypeError("You cannot resolve a promise with itself")):!function(t){var e=typeof t;return null!==t&&("object"==e||"function"==e)}(e)?L(t,e):A(t,e,k(e))}function x(t){t._onerror&&t._onerror(t._result),N(t)}function L(t,e){t._state===E&&(t._result=e,t._state=T,0!==t._subscribers.length&&s(N,t))}function j(t,e){t._state===E&&(t._state=O,t._result=e,s(x,t))}function I(t,e,r,n){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+T]=r,i[o+O]=n,0===o&&t._state&&s(N,t)}function N(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,i=void 0,o=t._result,s=0;s<e.length;s+=3)n=e[s],i=e[s+r],n?q(r,n,i,o):i(o);t._subscribers.length=0}}function q(t,e,r,n){var i=h(r),o=void 0,s=void 0,a=void 0,u=void 0;if(i){if((o=function(t,e){try{return t(e)}catch(t){return C.error=t,C}}(r,n))===C?(u=!0,s=o.error,o.error=null):a=!0,e===o)return void j(e,new TypeError("A promises callback cannot return that same promise."))}else o=n,a=!0;e._state!==E||(i&&a?R(e,o):u?j(e,s):t===T?L(e,o):t===O&&j(e,o))}var P=0;function M(t){t[_]=P++,t._state=void 0,t._result=void 0,t._subscribers=[]}var B=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(S),this.promise[_]||M(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?L(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&L(this.promise,this._result))):j(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===E&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===w){var i=k(e);if(i===b&&e._state!==E)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===U){var o=new r(S);A(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},t.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===E&&(this._remaining--,t===O?j(n,r):this._result[e]=r),0===this._remaining&&L(n,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;I(t,void 0,function(t){return r._settledAt(T,e,t)},function(t){return r._settledAt(O,e,t)})},t}();var U=function(){function e(t){this[_]=P++,this._result=this._state=void 0,this._subscribers=[],S!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){R(e,t)},function(t){j(e,t)})}catch(t){j(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var r=this.constructor;return h(e)?this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return U.prototype.then=b,U.all=function(t){return new B(this,t).promise},U.race=function(i){var o=this;return r(i)?new o(function(t,e){for(var r=i.length,n=0;n<r;n++)o.resolve(i[n]).then(t,e)}):new o(function(t,e){return e(new TypeError("You must pass an array to race."))})},U.resolve=w,U.reject=function(t){var e=new this(S);return j(e,t),e},U._setScheduler=function(t){i=t},U._setAsap=function(t){s=t},U._asap=s,U.polyfill=function(){var t=void 0;if(void 0!==F)t=F;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=U},U.Promise=U},"object"==typeof n&&void 0!==r?r.exports=e():t.ES6Promise=e()}).call(this,V("../../process/browser.js"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../process/browser.js":35}],28:[function(t,e,r){var u=Object.create||function(t){var e=function(){};return e.prototype=t,new e},s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return r},o=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function n(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=u(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((e.exports=n).EventEmitter=n).prototype._events=void 0,n.prototype._maxListeners=void 0;var i,a=10;try{var h={};Object.defineProperty&&Object.defineProperty(h,"x",{value:0}),i=0===h.x}catch(t){i=!1}function l(t){return void 0===t._maxListeners?n.defaultMaxListeners:t._maxListeners}function c(t,e,r,n){var i,o,s;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]):(o=t._events=u(null),t._eventsCount=0),s){if("function"==typeof s?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),!s.warned&&(i=l(t))&&0<i&&s.length>i){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",a.name,a.message)}}else s=o[e]=r,++t._eventsCount;return t}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function p(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=o.call(f,n);return i.listener=r,n.wrapFn=i}function d(t,e,r){var n=t._events;if(!n)return[];var i=n[e];return i?"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):g(i,i.length):[]}function y(t){var e=this._events;if(e){var r=e[t];if("function"==typeof r)return 1;if(r)return r.length}return 0}function g(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}i?Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');a=t}}):n.defaultMaxListeners=a,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},n.prototype.getMaxListeners=function(){return l(this)},n.prototype.emit=function(t){var e,r,n,i,o,s,a="error"===t;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){if(1<arguments.length&&(e=arguments[1]),e instanceof Error)throw e;var u=new Error('Unhandled "error" event. ('+e+")");throw u.context=e,u}if(!(r=s[t]))return!1;var h="function"==typeof r;switch(n=arguments.length){case 1:!function(t,e,r){if(e)t.call(r);else for(var n=t.length,i=g(t,n),o=0;o<n;++o)i[o].call(r)}(r,h,this);break;case 2:!function(t,e,r,n){if(e)t.call(r,n);else for(var i=t.length,o=g(t,i),s=0;s<i;++s)o[s].call(r,n)}(r,h,this,arguments[1]);break;case 3:!function(t,e,r,n,i){if(e)t.call(r,n,i);else for(var o=t.length,s=g(t,o),a=0;a<o;++a)s[a].call(r,n,i)}(r,h,this,arguments[1],arguments[2]);break;case 4:!function(t,e,r,n,i,o){if(e)t.call(r,n,i,o);else for(var s=t.length,a=g(t,s),u=0;u<s;++u)a[u].call(r,n,i,o)}(r,h,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),o=1;o<n;o++)i[o-1]=arguments[o];!function(t,e,r,n){if(e)t.apply(r,n);else for(var i=t.length,o=g(t,i),s=0;s<i;++s)o[s].apply(r,n)}(r,h,this,i)}return!0},n.prototype.on=n.prototype.addListener=function(t,e){return c(this,t,e,!1)},n.prototype.prependListener=function(t,e){return c(this,t,e,!0)},n.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,p(this,t,e)),this},n.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,p(this,t,e)),this},n.prototype.removeListener=function(t,e){var r,n,i,o,s;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=u(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;0<=o;o--)if(r[o]===e||r[o].listener===e){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(var r=e,n=r+1,i=t.length;n<i;r+=1,n+=1)t[r]=t[n];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),n.removeListener&&this.emit("removeListener",t,s||e)}return this},n.prototype.removeAllListeners=function(t){var e,r,n;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=u(null),this._eventsCount=0):r[t]&&(0==--this._eventsCount?this._events=u(null):delete r[t]),this;if(0===arguments.length){var i,o=s(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=u(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(e)for(n=e.length-1;0<=n;n--)this.removeListener(t,e[n]);return this},n.prototype.listeners=function(t){return d(this,t,!0)},n.prototype.rawListeners=function(t){return d(this,t,!1)},n.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):y.call(t,e)},n.prototype.listenerCount=y,n.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],29:[function(t,e,r){r.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,h=u>>1,l=-7,c=r?i-1:0,f=r?-1:1,p=t[e+c];for(c+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;0<l;o=256*o+t[e+c],c+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;0<l;s=256*s+t[e+c],c+=f,l-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=h}return(p?-1:1)*s*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var s,a,u,h=8*o-i-1,l=(1<<h)-1,c=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),2<=(e+=1<=s+c?f/u:f*Math.pow(2,1-c))*u&&(s++,u/=2),l<=s+c?(a=0,s=l):1<=s+c?(a=(e*u-1)*Math.pow(2,i),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));8<=i;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,h+=i;0<h;t[r+p]=255&s,p+=d,s/=256,h-=8);t[r+p-d]|=128*y}},{}],30:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],31:[function(t,e,r){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}e.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},{}],32:[function(t,e,r){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],33:[function(t,e,r){(function(u){var o={},h=o.LEFT_BRACE=1,l=o.RIGHT_BRACE=2,c=o.LEFT_BRACKET=3,f=o.RIGHT_BRACKET=4,p=o.COLON=5,d=o.COMMA=6,y=o.TRUE=7,g=o.FALSE=8,v=o.NULL=9,m=o.STRING=10,b=o.NUMBER=11,w=o.START=17,r=o.STOP=18,_=o.TRUE1=33,S=o.TRUE2=34,E=o.TRUE3=35,T=o.FALSE1=49,O=o.FALSE2=50,C=o.FALSE3=51,k=o.FALSE4=52,A=o.NULL1=65,R=o.NULL2=66,x=o.NULL3=67,L=o.NUMBER1=81,j=o.NUMBER3=83,I=o.STRING1=97,N=o.STRING2=98,q=o.STRING3=99,P=o.STRING4=100,M=o.STRING5=101,B=o.STRING6=102,n=o.VALUE=113,i=o.KEY=114,s=o.OBJECT=129,a=o.ARRAY=130,U="\\".charCodeAt(0),D="/".charCodeAt(0),F="\b".charCodeAt(0),V="\f".charCodeAt(0),H="\n".charCodeAt(0),W="\r".charCodeAt(0),G="\t".charCodeAt(0),X=65536;function J(){this.tState=w,this.value=void 0,this.string=void 0,this.stringBuffer=u.alloc?u.alloc(X):new u(X),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=n,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new u(2),3:new u(3),4:new u(4)},this.offset=-1}J.toknam=function(t){for(var e=Object.keys(o),r=0,n=e.length;r<n;r++){var i=e[r];if(o[i]===t)return i}return t&&"0x"+t.toString(16)};var t=J.prototype;t.onError=function(t){throw t},t.charError=function(t,e){this.tState=r,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(t[e]))+" at position "+e+" in state "+J.toknam(this.tState)))},t.appendStringChar=function(t){this.stringBufferOffset>=X&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=t},t.appendStringBuf=function(t,e,r){var n=t.length;"number"==typeof e&&(n="number"==typeof r?r<0?t.length-e+r:r-e:t.length-e),n<0&&(n=0),this.stringBufferOffset+n>X&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),t.copy(this.stringBuffer,this.stringBufferOffset,e,r),this.stringBufferOffset+=n},t.write=function(t){var e;"string"==typeof t&&(t=new u(t));for(var r=0,n=t.length;r<n;r++)if(this.tState===w){if(e=t[r],this.offset++,123===e)this.onToken(h,"{");else if(125===e)this.onToken(l,"}");else if(91===e)this.onToken(c,"[");else if(93===e)this.onToken(f,"]");else if(58===e)this.onToken(p,":");else if(44===e)this.onToken(d,",");else if(116===e)this.tState=_;else if(102===e)this.tState=T;else if(110===e)this.tState=A;else if(34===e)this.string="",this.stringBufferOffset=0,this.tState=I;else if(45===e)this.string="-",this.tState=L;else if(48<=e&&e<64)this.string=String.fromCharCode(e),this.tState=j;else if(32!==e&&9!==e&&10!==e&&13!==e)return this.charError(t,r)}else if(this.tState===I)if(e=t[r],0<this.bytes_remaining){for(var i=0;i<this.bytes_remaining;i++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+i]=t[i];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,r=r+i-1}else if(0===this.bytes_remaining&&128<=e){if(e<=193||244<e)return this.onError(new Error("Invalid UTF-8 character at position "+r+" in state "+J.toknam(this.tState)));if(194<=e&&e<=223&&(this.bytes_in_sequence=2),224<=e&&e<=239&&(this.bytes_in_sequence=3),240<=e&&e<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+r>t.length){for(var o=0;o<=t.length-1-r;o++)this.temp_buffs[this.bytes_in_sequence][o]=t[r+o];this.bytes_remaining=r+this.bytes_in_sequence-t.length,r=t.length-1}else this.appendStringBuf(t,r,r+this.bytes_in_sequence),r=r+this.bytes_in_sequence-1}else if(34===e)this.tState=w,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(m,this.string),this.offset+=u.byteLength(this.string,"utf8")+1,this.string=void 0;else if(92===e)this.tState=N;else{if(!(32<=e))return this.charError(t,r);this.appendStringChar(e)}else if(this.tState===N)if(34===(e=t[r]))this.appendStringChar(e),this.tState=I;else if(92===e)this.appendStringChar(U),this.tState=I;else if(47===e)this.appendStringChar(D),this.tState=I;else if(98===e)this.appendStringChar(F),this.tState=I;else if(102===e)this.appendStringChar(V),this.tState=I;else if(110===e)this.appendStringChar(H),this.tState=I;else if(114===e)this.appendStringChar(W),this.tState=I;else if(116===e)this.appendStringChar(G),this.tState=I;else{if(117!==e)return this.charError(t,r);this.unicode="",this.tState=q}else if(this.tState===q||this.tState===P||this.tState===M||this.tState===B){if(!(48<=(e=t[r])&&e<64||64<e&&e<=70||96<e&&e<=102))return this.charError(t,r);if(this.unicode+=String.fromCharCode(e),this.tState++==B){var s=parseInt(this.unicode,16);(this.unicode=void 0)!==this.highSurrogate&&56320<=s&&s<57344?(this.appendStringBuf(new u(String.fromCharCode(this.highSurrogate,s))),this.highSurrogate=void 0):void 0===this.highSurrogate&&55296<=s&&s<56320?this.highSurrogate=s:(void 0!==this.highSurrogate&&(this.appendStringBuf(new u(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new u(String.fromCharCode(s)))),this.tState=I}}else if(this.tState===L||this.tState===j)switch(e=t[r]){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(e),this.tState=j;break;default:this.tState=w;var a=Number(this.string);if(isNaN(a))return this.charError(t,r);this.string.match(/[0-9]+/)==this.string&&a.toString()!=this.string?this.onToken(m,this.string):this.onToken(b,a),this.offset+=this.string.length-1,this.string=void 0,r--}else if(this.tState===_){if(114!==t[r])return this.charError(t,r);this.tState=S}else if(this.tState===S){if(117!==t[r])return this.charError(t,r);this.tState=E}else if(this.tState===E){if(101!==t[r])return this.charError(t,r);this.tState=w,this.onToken(y,!0),this.offset+=3}else if(this.tState===T){if(97!==t[r])return this.charError(t,r);this.tState=O}else if(this.tState===O){if(108!==t[r])return this.charError(t,r);this.tState=C}else if(this.tState===C){if(115!==t[r])return this.charError(t,r);this.tState=k}else if(this.tState===k){if(101!==t[r])return this.charError(t,r);this.tState=w,this.onToken(g,!1),this.offset+=4}else if(this.tState===A){if(117!==t[r])return this.charError(t,r);this.tState=R}else if(this.tState===R){if(108!==t[r])return this.charError(t,r);this.tState=x}else if(this.tState===x){if(108!==t[r])return this.charError(t,r);this.tState=w,this.onToken(v,null),this.offset+=3}},t.onToken=function(t,e){},t.parseError=function(t,e){this.tState=r,this.onError(new Error("Unexpected "+J.toknam(t)+(e?"("+JSON.stringify(e)+")":"")+" in state "+J.toknam(this.state)))},t.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},t.pop=function(){var t=this.value,e=this.stack.pop();this.value=e.value,this.key=e.key,this.mode=e.mode,this.emit(t),this.mode||(this.state=n)},t.emit=function(t){this.mode&&(this.state=d),this.onValue(t)},t.onValue=function(t){},t.onToken=function(t,e){if(this.state===n)if(t===m||t===b||t===y||t===g||t===v)this.value&&(this.value[this.key]=e),this.emit(e);else if(t===h)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=i,this.mode=s;else if(t===c)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=a,this.state=n;else if(t===l){if(this.mode!==s)return this.parseError(t,e);this.pop()}else{if(t!==f)return this.parseError(t,e);if(this.mode!==a)return this.parseError(t,e);this.pop()}else if(this.state===i)if(t===m)this.key=e,this.state=p;else{if(t!==l)return this.parseError(t,e);this.pop()}else if(this.state===p){if(t!==p)return this.parseError(t,e);this.state=n}else{if(this.state!==d)return this.parseError(t,e);if(t===d)this.mode===a?(this.key++,this.state=n):this.mode===s&&(this.state=i);else{if(!(t===f&&this.mode===a||t===l&&this.mode===s))return this.parseError(t,e);this.pop()}}},J.C=o,e.exports=J}).call(this,t("buffer").Buffer)},{buffer:24}],34:[function(t,e,r){(function(a){"use strict";!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?e.exports={nextTick:function(t,e,r,n){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var i,o,s=arguments.length;switch(s){case 0:case 1:return a.nextTick(t);case 2:return a.nextTick(function(){t.call(null,e)});case 3:return a.nextTick(function(){t.call(null,e,r)});case 4:return a.nextTick(function(){t.call(null,e,r,n)});default:for(i=new Array(s-1),o=0;o<i.length;)i[o++]=arguments[o];return a.nextTick(function(){t.apply(null,i)})}}}:e.exports=a}).call(this,t("../process/browser.js"))},{"../process/browser.js":35}],35:[function(t,e,r){var n,i,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var h,l=[],c=!1,f=-1;function p(){c&&h&&(c=!1,h.length?l=h.concat(l):f=-1,l.length&&d())}function d(){if(!c){var t=u(p);c=!0;for(var e=l.length;e;){for(h=l,l=[];++f<e;)h&&h[f].run();f=-1,e=l.length}h=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new y(t,e)),1!==l.length||c||u(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],36:[function(t,j,I){(function(L){!function(t){var e="object"==typeof I&&I&&!I.nodeType&&I,r="object"==typeof j&&j&&!j.nodeType&&j,n="object"==typeof L&&L;n.global!==n&&n.window!==n&&n.self!==n||(t=n);var i,o,v=2147483647,m=36,b=1,w=26,s=38,a=700,_=72,S=128,E="-",u=/^xn--/,h=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=m-b,T=Math.floor,O=String.fromCharCode;function C(t){throw new RangeError(c[t])}function p(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function d(t,e){var r=t.split("@"),n="";return 1<r.length&&(n=r[0]+"@",t=r[1]),n+p((t=t.replace(l,".")).split("."),e).join(".")}function k(t){for(var e,r,n=[],i=0,o=t.length;i<o;)55296<=(e=t.charCodeAt(i++))&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function A(t){return p(t,function(t){var e="";return 65535<t&&(e+=O((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=O(t)}).join("")}function R(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,r){var n=0;for(t=r?T(t/a):t>>1,t+=T(t/e);f*w>>1<t;n+=m)t=T(t/f);return T(n+(f+1)*t/(t+s))}function y(t){var e,r,n,i,o,s,a,u,h,l,c,f=[],p=t.length,d=0,y=S,g=_;for((r=t.lastIndexOf(E))<0&&(r=0),n=0;n<r;++n)128<=t.charCodeAt(n)&&C("not-basic"),f.push(t.charCodeAt(n));for(i=0<r?r+1:0;i<p;){for(o=d,s=1,a=m;p<=i&&C("invalid-input"),c=t.charCodeAt(i++),(m<=(u=c-48<10?c-22:c-65<26?c-65:c-97<26?c-97:m)||u>T((v-d)/s))&&C("overflow"),d+=u*s,!(u<(h=a<=g?b:g+w<=a?w:a-g));a+=m)s>T(v/(l=m-h))&&C("overflow"),s*=l;g=x(d-o,e=f.length+1,0==o),T(d/e)>v-y&&C("overflow"),y+=T(d/e),d%=e,f.splice(d++,0,y)}return A(f)}function g(t){var e,r,n,i,o,s,a,u,h,l,c,f,p,d,y,g=[];for(f=(t=k(t)).length,e=S,o=_,s=r=0;s<f;++s)(c=t[s])<128&&g.push(O(c));for(n=i=g.length,i&&g.push(E);n<f;){for(a=v,s=0;s<f;++s)e<=(c=t[s])&&c<a&&(a=c);for(a-e>T((v-r)/(p=n+1))&&C("overflow"),r+=(a-e)*p,e=a,s=0;s<f;++s)if((c=t[s])<e&&++r>v&&C("overflow"),c==e){for(u=r,h=m;!(u<(l=h<=o?b:o+w<=h?w:h-o));h+=m)y=u-l,d=m-l,g.push(O(R(l+y%d,0))),u=T(y/d);g.push(O(R(u,0))),o=x(r,p,n==i),r=0,++n}++r,++e}return g.join("")}if(i={version:"1.4.1",ucs2:{decode:k,encode:A},decode:y,encode:g,toASCII:function(t){return d(t,function(t){return h.test(t)?"xn--"+g(t):t})},toUnicode:function(t){return d(t,function(t){return u.test(t)?y(t.slice(4).toLowerCase()):t})}},e&&r)if(j.exports==e)r.exports=i;else for(o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);else t.punycode=i}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){e=e||"&",r=r||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var a,u,h=t.length;0<s&&s<h&&(h=s);for(var l=0;l<h;++l){var c,f,p,d,y=t[l].replace(o,"%20"),g=y.indexOf(r);f=0<=g?(c=y.substr(0,g),y.substr(g+1)):(c=y,""),p=decodeURIComponent(c),d=decodeURIComponent(f),a=i,u=p,Object.prototype.hasOwnProperty.call(a,u)?v(i[p])?i[p].push(d):i[p]=[i[p],d]:i[p]=d}return i};var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],38:[function(t,e,r){"use strict";var o=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(r,n,i,t){return n=n||"&",i=i||"=",null===r&&(r=void 0),"object"==typeof r?a(u(r),function(t){var e=encodeURIComponent(o(t))+i;return s(r[t])?a(r[t],function(t){return e+encodeURIComponent(o(t))}).join(n):e+encodeURIComponent(o(r[t]))}).join(n):t?encodeURIComponent(o(t))+i+encodeURIComponent(o(r)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var u=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],39:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":37,"./encode":38}],40:[function(t,e,r){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":41}],41:[function(t,e,r){"use strict";var n=t("process-nextick-args"),i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};e.exports=c;var o=t("core-util-is");o.inherits=t("inherits");var s=t("./_stream_readable"),a=t("./_stream_writable");o.inherits(c,s);for(var u=i(a.prototype),h=0;h<u.length;h++){var l=u[h];c.prototype[l]||(c.prototype[l]=a.prototype[l])}function c(t){if(!(this instanceof c))return new c(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||n.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),c.prototype._destroy=function(t,e){this.push(null),this.end(),n.nextTick(e,t)}},{"./_stream_readable":43,"./_stream_writable":45,"core-util-is":26,inherits:30,"process-nextick-args":34}],42:[function(t,e,r){"use strict";e.exports=o;var n=t("./_stream_transform"),i=t("core-util-is");function o(t){if(!(this instanceof o))return new o(t);n.call(this,t)}i.inherits=t("inherits"),i.inherits(o,n),o.prototype._transform=function(t,e,r){r(null,t)}},{"./_stream_transform":44,"core-util-is":26,inherits:30}],43:[function(I,N,t){(function(y,t){"use strict";var g=I("process-nextick-args");N.exports=f;var s,v=I("isarray");f.ReadableState=o;I("events").EventEmitter;var m=function(t,e){return t.listeners(e).length},i=I("./internal/streams/stream"),a=I("safe-buffer").Buffer,u=t.Uint8Array||function(){};var e=I("core-util-is");e.inherits=I("inherits");var r=I("util"),b=void 0;b=r&&r.debuglog?r.debuglog("stream"):function(){};var h,l=I("./internal/streams/BufferList"),n=I("./internal/streams/destroy");e.inherits(f,i);var c=["error","close","destroy","pause","resume"];function o(t,e){t=t||{};var r=e instanceof(s=s||I("./_stream_duplex"));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(i||0===i)?i:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=I("string_decoder/").StringDecoder),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function f(t){if(s=s||I("./_stream_duplex"),!(this instanceof f))return new f(t);this._readableState=new o(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),i.call(this)}function p(t,e,r,n,i){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,S(t)}(t,s)):(i||(o=function(t,e){var r;(function(t){return a.isBuffer(t)||t instanceof u})(e)||"string"==typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r}(s,e)),o?t.emit("error",o):s.objectMode||e&&0<e.length?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===a.prototype||(e=function(t){return a.from(t)}(e)),n?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):d(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||0!==e.length?d(t,s,e,!1):T(t,s)):d(t,s,e,!1))):n||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function d(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&S(t)),T(t,e)}Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),f.prototype.destroy=n.destroy,f.prototype._undestroy=n.undestroy,f.prototype._destroy=function(t,e){this.push(null),e(t)},f.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=a.from(t,e),e=""),r=!0),p(this,t,e,!1,r)},f.prototype.unshift=function(t){return p(this,t,null,!0,!1)},f.prototype.isPaused=function(){return!1===this._readableState.flowing},f.prototype.setEncoding=function(t){return h||(h=I("string_decoder/").StringDecoder),this._readableState.decoder=new h(t),this._readableState.encoding=t,this};var w=8388608;function _(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return w<=t?t=w:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(b("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?g.nextTick(E,t):E(t))}function E(t){b("emit readable"),t.emit("readable"),A(t)}function T(t,e){e.readingMore||(e.readingMore=!0,g.nextTick(O,t,e))}function O(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(b("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function C(t){b("readable nexttick read 0"),t.read(0)}function k(t,e){e.reading||(b("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),A(t),e.flowing&&!e.reading&&t.read(0)}function A(t){var e=t._readableState;for(b("flow",e.flowing);e.flowing&&null!==t.read(););}function R(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=function(t,e,r){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?function(t,e){var r=e.head,n=1,i=r.data;t-=i.length;for(;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r).data=o.slice(s);break}++n}return e.length-=n,i}(t,e):function(t,e){var r=a.allocUnsafe(t),n=e.head,i=1;n.data.copy(r),t-=n.data.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),0===(t-=s)){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n).data=o.slice(s);break}++i}return e.length-=i,r}(t,e);return n}(t,e.buffer,e.decoder),r);var r}function x(t){var e=t._readableState;if(0<e.length)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,g.nextTick(L,e,t))}function L(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function j(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}f.prototype.read=function(t){b("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return b("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?x(this):S(this),null;if(0===(t=_(t,e))&&e.ended)return 0===e.length&&x(this),null;var n,i=e.needReadable;return b("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&b("length less than watermark",i=!0),e.ended||e.reading?b("reading or ended",i=!1):i&&(b("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=_(r,e))),null===(n=0<t?R(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&x(this)),null!==n&&this.emit("data",n),n},f.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},f.prototype.pipe=function(r,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=r;break;case 1:i.pipes=[i.pipes,r];break;default:i.pipes.push(r)}i.pipesCount+=1,b("pipe count=%d opts=%j",i.pipesCount,t);var e=(!t||!1!==t.end)&&r!==y.stdout&&r!==y.stderr?s:d;function o(t,e){b("onunpipe"),t===n&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,b("cleanup"),r.removeListener("close",f),r.removeListener("finish",p),r.removeListener("drain",a),r.removeListener("error",c),r.removeListener("unpipe",o),n.removeListener("end",s),n.removeListener("end",d),n.removeListener("data",l),u=!0,!i.awaitDrain||r._writableState&&!r._writableState.needDrain||a())}function s(){b("onend"),r.end()}i.endEmitted?g.nextTick(e):n.once("end",e),r.on("unpipe",o);var a=function(e){return function(){var t=e._readableState;b("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&m(e,"data")&&(t.flowing=!0,A(e))}}(n);r.on("drain",a);var u=!1;var h=!1;function l(t){b("ondata"),(h=!1)!==r.write(t)||h||((1===i.pipesCount&&i.pipes===r||1<i.pipesCount&&-1!==j(i.pipes,r))&&!u&&(b("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,h=!0),n.pause())}function c(t){b("onerror",t),d(),r.removeListener("error",c),0===m(r,"error")&&r.emit("error",t)}function f(){r.removeListener("finish",p),d()}function p(){b("onfinish"),r.removeListener("close",f),d()}function d(){b("unpipe"),n.unpipe(r)}return n.on("data",l),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?v(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(r,"error",c),r.once("close",f),r.once("finish",p),r.emit("pipe",n),i.flowing||(b("pipe resume"),n.resume()),r},f.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=j(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},f.prototype.addListener=f.prototype.on=function(t,e){var r=i.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&S(this):g.nextTick(C,this))}return r},f.prototype.resume=function(){var t=this._readableState;return t.flowing||(b("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,g.nextTick(k,t,e))}(this,t)),this},f.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this},f.prototype.wrap=function(e){var r=this,n=this._readableState,i=!1;for(var t in e.on("end",function(){if(b("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),e.on("data",function(t){(b("wrapped data"),n.decoder&&(t=n.decoder.write(t)),n.objectMode&&null==t)||(n.objectMode||t&&t.length)&&(r.push(t)||(i=!0,e.pause()))}),e)void 0===this[t]&&"function"==typeof e[t]&&(this[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t));for(var o=0;o<c.length;o++)e.on(c[o],this.emit.bind(this,c[o]));return this._read=function(t){b("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(f.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),f._fromList=R}).call(this,I("../../process/browser.js"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../process/browser.js":35,"./_stream_duplex":41,"./internal/streams/BufferList":46,"./internal/streams/destroy":47,"./internal/streams/stream":48,"core-util-is":26,events:28,inherits:30,isarray:32,"process-nextick-args":34,"safe-buffer":53,"string_decoder/":59,util:23}],44:[function(t,e,r){"use strict";e.exports=o;var n=t("./_stream_duplex"),i=t("core-util-is");function o(t){if(!(this instanceof o))return new o(t);n.call(this,t),this._transformState={afterTransform:function(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,(r.writecb=null)!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var r=this;"function"==typeof this._flush?this._flush(function(t,e){a(r,t,e)}):a(this,null,null)}function a(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=t("inherits"),i.inherits(o,n),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var r=this;n.prototype._destroy.call(this,t,function(t){e(t),r.emit("close")})}},{"./_stream_duplex":41,"core-util-is":26,inherits:30}],45:[function(E,T,t){(function(t,e,r){"use strict";var a=E("process-nextick-args");function c(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}T.exports=g;var u,h=!t.browser&&-1<["v0.10","v0.9."].indexOf(t.version.slice(0,5))?r:a.nextTick;g.WritableState=y;var n=E("core-util-is");n.inherits=E("inherits");var i={deprecate:E("util-deprecate")},o=E("./internal/streams/stream"),l=E("safe-buffer").Buffer,s=e.Uint8Array||function(){};var f,p=E("./internal/streams/destroy");function d(){}function y(t,e){u=u||E("./_stream_duplex"),t=t||{};var r=e instanceof u;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=t.writableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(i||0===i)?i:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=(this.destroyed=!1)===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,n,i){--e.pendingcb,r?(a.nextTick(i,n),a.nextTick(S,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),S(t,e))}(t,r,n,e,i);else{var o=w(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||b(t,r),n?h(m,t,r,o,i):m(t,r,o,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new c(this)}function g(t){if(u=u||E("./_stream_duplex"),!(f.call(g,this)||this instanceof u))return new g(t);this._writableState=new y(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),o.call(this)}function v(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function m(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),S(t,e)}function b(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)(i[s]=r).isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,v(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new c(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,h=r.encoding,l=r.callback;if(v(t,e,!1,e.objectMode?1:u.length,u,h,l),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function w(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function _(e,r){e._final(function(t){r.pendingcb--,t&&e.emit("error",t),r.prefinished=!0,e.emit("prefinish"),S(e,r)})}function S(t,e){var r=w(e);return r&&(function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,a.nextTick(_,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}n.inherits(g,o),y.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(y.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(t){return!!f.call(this,t)||this===g&&(t&&t._writableState instanceof y)}})):f=function(t){return t instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&function(t){return l.isBuffer(t)||t instanceof s}(t);return o&&!l.isBuffer(t)&&(t=function(t){return l.from(t)}(t)),"function"==typeof e&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof r&&(r=d),n.ended?function(t,e){var r=new Error("write after end");t.emit("error",r),a.nextTick(e,r)}(this,r):(o||function(t,e,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),a.nextTick(n,o),i=!1),i}(this,n,t,r))&&(n.pendingcb++,i=function(t,e,r,n,i,o){if(!r){var s=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=l.from(e,r));return e}(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else v(t,e,!1,a,n,i,o);return u}(this,n,o,t,e,r)),i},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||b(this,t))},g.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,e=t=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,r){e.ending=!0,S(t,e),r&&(e.finished?a.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,n,r)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),g.prototype.destroy=p.destroy,g.prototype._undestroy=p.undestroy,g.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,E("../../process/browser.js"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},E("timers").setImmediate)},{"../../process/browser.js":35,"./_stream_duplex":41,"./internal/streams/destroy":47,"./internal/streams/stream":48,"core-util-is":26,inherits:30,"process-nextick-args":34,"safe-buffer":53,timers:61,"util-deprecate":65}],46:[function(t,e,r){"use strict";var a=t("safe-buffer").Buffer,n=t("util");e.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},t.prototype.concat=function(t){if(0===this.length)return a.alloc(0);if(1===this.length)return this.head.data;for(var e,r,n,i=a.allocUnsafe(t>>>0),o=this.head,s=0;o;)e=o.data,r=i,n=s,e.copy(r,n),s+=o.data.length,o=o.next;return i},t}(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var t=n.inspect({length:this.length});return this.constructor.name+" "+t})},{"safe-buffer":53,util:23}],47:[function(t,e,r){"use strict";var o=t("process-nextick-args");function s(t,e){t.emit("error",e)}e.exports={destroy:function(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||o.nextTick(s,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(o.nextTick(s,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":34}],48:[function(t,e,r){e.exports=t("events").EventEmitter},{events:28}],49:[function(t,e,r){e.exports=t("./readable").PassThrough},{"./readable":50}],50:[function(t,e,r){(((r=e.exports=t("./lib/_stream_readable.js")).Stream=r).Readable=r).Writable=t("./lib/_stream_writable.js"),r.Duplex=t("./lib/_stream_duplex.js"),r.Transform=t("./lib/_stream_transform.js"),r.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":41,"./lib/_stream_passthrough.js":42,"./lib/_stream_readable.js":43,"./lib/_stream_transform.js":44,"./lib/_stream_writable.js":45}],51:[function(t,e,r){e.exports=t("./readable").Transform},{"./readable":50}],52:[function(t,e,r){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":45}],53:[function(t,e,r){var n=t("buffer"),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,r),r.Buffer=s),o(i,s),s.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},s.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},{buffer:24}],54:[function(t,e,r){e.exports=n;var l=t("events").EventEmitter;function n(){l.call(this)}t("inherits")(n,l),n.Readable=t("readable-stream/readable.js"),n.Writable=t("readable-stream/writable.js"),n.Duplex=t("readable-stream/duplex.js"),n.Transform=t("readable-stream/transform.js"),n.PassThrough=t("readable-stream/passthrough.js"),(n.Stream=n).prototype.pipe=function(e,t){var r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",a));var o=!1;function s(){o||(o=!0,e.end())}function a(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function u(t){if(h(),0===l.listenerCount(this,"error"))throw t}function h(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",h),r.removeListener("close",h),e.removeListener("close",h)}return r.on("error",u),e.on("error",u),r.on("end",h),r.on("close",h),e.on("close",h),e.emit("pipe",r),e}},{events:28,inherits:30,"readable-stream/duplex.js":40,"readable-stream/passthrough.js":49,"readable-stream/readable.js":50,"readable-stream/transform.js":51,"readable-stream/writable.js":52}],55:[function(r,t,i){(function(u){var h=r("./lib/request"),t=r("./lib/response"),l=r("xtend"),e=r("builtin-status-codes"),c=r("url"),n=i;n.request=function(t,e){t="string"==typeof t?c.parse(t):l(t);var r=-1===u.location.protocol.search(/^https?:$/)?"http:":"",n=t.protocol||r,i=t.hostname||t.host,o=t.port,s=t.path||"/";i&&-1!==i.indexOf(":")&&(i="["+i+"]"),t.url=(i?n+"//"+i:"")+(o?":"+o:"")+s,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var a=new h(t);return e&&a.on("response",e),a},n.get=function(t,e){var r=n.request(t,e);return r.end(),r},n.ClientRequest=h,n.IncomingMessage=t.IncomingMessage,n.Agent=function(){},n.Agent.defaultMaxSockets=4,n.globalAgent=new n.Agent,n.STATUS_CODES=e,n.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":57,"./lib/response":58,"builtin-status-codes":25,url:63,xtend:66}],56:[function(t,e,a){(function(t){a.fetch=s(t.fetch)&&s(t.ReadableStream),a.writableStream=s(t.WritableStream),a.abortController=s(t.AbortController),a.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),a.blobConstructor=!0}catch(t){}var e;function r(){if(void 0!==e)return e;if(t.XMLHttpRequest){e=new t.XMLHttpRequest;try{e.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){e=null}}else e=null;return e}function n(t){var e=r();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var i=void 0!==t.ArrayBuffer,o=i&&s(t.ArrayBuffer.prototype.slice);function s(t){return"function"==typeof t}a.arraybuffer=a.fetch||i&&n("arraybuffer"),a.msstream=!a.fetch&&o&&n("ms-stream"),a.mozchunkedarraybuffer=!a.fetch&&i&&n("moz-chunked-arraybuffer"),a.overrideMimeType=a.fetch||!!r()&&s(r().overrideMimeType),a.vbArray=s(t.VBArray),e=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],57:[function(s,a,t){(function(u,h,l){var c=s("./capability"),t=s("inherits"),e=s("./response"),i=s("readable-stream"),f=s("to-arraybuffer"),r=e.IncomingMessage,p=e.readyStates;var n=a.exports=function(e){var t,r=this;i.Writable.call(r),r._opts=e,r._body=[],r._headers={},e.auth&&r.setHeader("Authorization","Basic "+new l(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(t){r.setHeader(t,e.headers[t])});var n=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!c.abortController)t=!(n=!1);else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!c.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}r._mode=function(t,e){return c.fetch&&e?"fetch":c.mozchunkedarraybuffer?"moz-chunked-arraybuffer":c.msstream?"ms-stream":c.arraybuffer&&t?"arraybuffer":c.vbArray&&t?"text:vbarray":"text"}(t,n),r._fetchTimer=null,r.on("finish",function(){r._onFinish()})};t(n,i.Writable),n.prototype.setHeader=function(t,e){var r=t.toLowerCase();-1===o.indexOf(r)&&(this._headers[r]={name:t,value:e})},n.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},n.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},n.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,n=e._headers,r=null;"GET"!==t.method&&"HEAD"!==t.method&&(r=c.arraybuffer?f(l.concat(e._body)):c.blobConstructor?new h.Blob(e._body.map(function(t){return f(t)}),{type:(n["content-type"]||{}).value||""}):l.concat(e._body).toString());var i=[];if(Object.keys(n).forEach(function(t){var e=n[t].name,r=n[t].value;Array.isArray(r)?r.forEach(function(t){i.push([e,t])}):i.push([e,r])}),"fetch"===e._mode){var o=null;if(c.abortController){var s=new AbortController;o=s.signal,e._fetchAbortController=s,"requestTimeout"in t&&0!==t.requestTimeout&&(e._fetchTimer=h.setTimeout(function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()},t.requestTimeout))}h.fetch(e._opts.url,{method:e._opts.method,headers:i,body:r||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin",signal:o}).then(function(t){e._fetchResponse=t,e._connect()},function(t){h.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)})}else{var a=e._xhr=new h.XMLHttpRequest;try{a.open(e._opts.method,e._opts.url,!0)}catch(t){return void u.nextTick(function(){e.emit("error",t)})}"responseType"in a&&(a.responseType=e._mode.split(":")[0]),"withCredentials"in a&&(a.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in a&&a.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in t&&(a.timeout=t.requestTimeout,a.ontimeout=function(){e.emit("requestTimeout")}),i.forEach(function(t){a.setRequestHeader(t[0],t[1])}),e._response=null,a.onreadystatechange=function(){switch(a.readyState){case p.LOADING:case p.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(a.onprogress=function(){e._onXHRProgress()}),a.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{a.send(r)}catch(t){return void u.nextTick(function(){e.emit("error",t)})}}}},n.prototype._onXHRProgress=function(){(function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},n.prototype._connect=function(){var e=this;e._destroyed||(e._response=new r(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},n.prototype._write=function(t,e,r){this._body.push(t),r()},n.prototype.abort=n.prototype.destroy=function(){this._destroyed=!0,h.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},n.prototype.end=function(t,e,r){"function"==typeof t&&(r=t,t=void 0),i.Writable.prototype.end.call(this,t,e,r)},n.prototype.flushHeaders=function(){},n.prototype.setTimeout=function(){},n.prototype.setNoDelay=function(){},n.prototype.setSocketKeepAlive=function(){};var o=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,s("../../process/browser.js"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},s("buffer").Buffer)},{"../../process/browser.js":35,"./capability":56,"./response":58,buffer:24,inherits:30,"readable-stream":50,"to-arraybuffer":62}],58:[function(r,t,n){(function(h,l,c){var f=r("./capability"),t=r("inherits"),p=r("readable-stream"),a=n.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},e=n.IncomingMessage=function(t,e,r,n){var i=this;if(p.Readable.call(i),i._mode=r,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",function(){h.nextTick(function(){i.emit("close")})}),"fetch"===r){if(i._fetchResponse=e,i.url=e.url,i.statusCode=e.status,i.statusMessage=e.statusText,e.headers.forEach(function(t,e){i.headers[e.toLowerCase()]=t,i.rawHeaders.push(e,t)}),f.writableStream){var o=new WritableStream({write:function(r){return new Promise(function(t,e){i._destroyed?e():i.push(new c(r))?t():i._resumeFetch=t})},close:function(){l.clearTimeout(n),i._destroyed||i.push(null)},abort:function(t){i._destroyed||i.emit("error",t)}});try{return void e.body.pipeTo(o).catch(function(t){l.clearTimeout(n),i._destroyed||i.emit("error",t)})}catch(t){}}var s=e.body.getReader();!function e(){s.read().then(function(t){if(!i._destroyed){if(t.done)return l.clearTimeout(n),void i.push(null);i.push(new c(t.value)),e()}}).catch(function(t){l.clearTimeout(n),i._destroyed||i.emit("error",t)})}()}else{if(i._xhr=t,i._pos=0,i.url=t.responseURL,i.statusCode=t.status,i.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach(function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var r=e[1].toLowerCase();"set-cookie"===r?(void 0===i.headers[r]&&(i.headers[r]=[]),i.headers[r].push(e[2])):void 0!==i.headers[r]?i.headers[r]+=", "+e[2]:i.headers[r]=e[2],i.rawHeaders.push(e[1],e[2])}}),i._charset="x-user-defined",!f.overrideMimeType){var a=i.rawHeaders["mime-type"];if(a){var u=a.match(/;\s*charset=([^;])(;|$)/);u&&(i._charset=u[1].toLowerCase())}i._charset||(i._charset="utf-8")}}};t(e,p.Readable),e.prototype._read=function(){var t=this._resumeFetch;t&&(this._resumeFetch=null,t())},e.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==a.DONE)break;try{r=new l.VBArray(t.responseBody).toArray()}catch(t){}if(null!==r){e.push(new c(r));break}case"text":try{r=t.responseText}catch(t){e._mode="text:vbarray";break}if(r.length>e._pos){var n=r.substr(e._pos);if("x-user-defined"===e._charset){for(var i=new c(n.length),o=0;o<n.length;o++)i[o]=255&n.charCodeAt(o);e.push(i)}else e.push(n,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==a.DONE||!t.response)break;r=t.response,e.push(new c(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==a.LOADING||!r)break;e.push(new c(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==a.LOADING)break;var s=new l.MSStreamReader;s.onprogress=function(){s.result.byteLength>e._pos&&(e.push(new c(new Uint8Array(s.result.slice(e._pos)))),e._pos=s.result.byteLength)},s.onload=function(){e.push(null)},s.readAsArrayBuffer(r)}e._xhr.readyState===a.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,r("../../process/browser.js"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},r("buffer").Buffer)},{"../../process/browser.js":35,"./capability":56,buffer:24,inherits:30,"readable-stream":50}],59:[function(t,e,r){"use strict";var n=t("safe-buffer").Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=h,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=l,this.end=c,e=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"";if(1<t.lastNeed&&1<e.length){if(128!=(192&e[1]))return t.lastNeed=1,"";if(2<t.lastNeed&&2<e.length&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1);var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(55296<=n&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function l(t,e){var r=(t.length-e)%3;return 0==r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function c(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}(r.StringDecoder=o).prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},o.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=s(e[n]);if(0<=i)return 0<i&&(t.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if(0<=(i=s(e[n])))return 0<i&&(t.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if(0<=(i=s(e[n])))return 0<i&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":53}],60:[function(e,r,t){(function(h){var l=e("stream");function t(e,r,t){e=e||function(t){this.queue(t)},r=r||function(){this.queue(null)};var n=!1,i=!1,o=[],s=!1,a=new l;function u(){for(;o.length&&!a.paused;){var t=o.shift();if(null===t)return a.emit("end");a.emit("data",t)}}return a.readable=a.writable=!0,a.paused=!1,a.autoDestroy=!(t&&!1===t.autoDestroy),a.write=function(t){return e.call(this,t),!a.paused},a.queue=a.push=function(t){return s||(null===t&&(s=!0),o.push(t),u()),a},a.on("end",function(){a.readable=!1,!a.writable&&a.autoDestroy&&h.nextTick(function(){a.destroy()})}),a.end=function(t){if(!n)return n=!0,arguments.length&&a.write(t),a.writable=!1,r.call(a),!a.readable&&a.autoDestroy&&a.destroy(),a},a.destroy=function(){if(!i)return n=i=!0,o.length=0,a.writable=a.readable=!1,a.emit("close"),a},a.pause=function(){if(!a.paused)return a.paused=!0,a},a.resume=function(){return a.paused&&(a.paused=!1,a.emit("resume")),u(),a.paused||a.emit("drain"),a},a}r.exports=t,t.through=t}).call(this,e("../process/browser.js"))},{"../process/browser.js":35,stream:54}],61:[function(u,t,h){(function(t,e){var n=u("process/browser.js").nextTick,r=Function.prototype.apply,i=Array.prototype.slice,o={},s=0;function a(t,e){this._id=t,this._clearFn=e}h.setTimeout=function(){return new a(r.call(setTimeout,window,arguments),clearTimeout)},h.setInterval=function(){return new a(r.call(setInterval,window,arguments),clearInterval)},h.clearTimeout=h.clearInterval=function(t){t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},h.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},h.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},h._unrefActive=h.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},h.setImmediate="function"==typeof t?t:function(t){var e=s++,r=!(arguments.length<2)&&i.call(arguments,1);return o[e]=!0,n(function(){o[e]&&(r?t.apply(null,r):t.call(null),h.clearImmediate(e))}),e},h.clearImmediate="function"==typeof e?e:function(t){delete o[t]}}).call(this,u("timers").setImmediate,u("timers").clearImmediate)},{"process/browser.js":35,timers:61}],62:[function(t,e,r){var i=t("buffer").Buffer;e.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(i.isBuffer(t)){for(var e=new Uint8Array(t.length),r=t.length,n=0;n<r;n++)e[n]=t[n];return e.buffer}throw new Error("Argument must be a Buffer")}},{buffer:24}],63:[function(t,e,r){"use strict";var I=t("punycode"),N=t("./util");function k(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=o,r.resolve=function(t,e){return o(t,!1,!0).resolve(e)},r.resolveObject=function(t,e){return t?o(t,!1,!0).resolveObject(e):e},r.format=function(t){N.isString(t)&&(t=o(t));return t instanceof k?t.format():k.prototype.format.call(t)},r.Url=k;var q=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,P=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,i=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),M=["'"].concat(i),B=["%","/","?",";","#"].concat(M),U=["/","?","#"],D=/^[+a-z0-9A-Z_-]{0,63}$/,F=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,V={javascript:!0,"javascript:":!0},H={javascript:!0,"javascript:":!0},W={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},G=t("querystring");function o(t,e,r){if(t&&N.isObject(t)&&t instanceof k)return t;var n=new k;return n.parse(t,e,r),n}k.prototype.parse=function(t,e,r){if(!N.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=-1!==n&&n<t.indexOf("#")?"?":"#",o=t.split(i);o[0]=o[0].replace(/\\/g,"/");var s=t=o.join(i);if(s=s.trim(),!r&&1===t.split("#").length){var a=P.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?G.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=q.exec(s);if(u){var h=(u=u[0]).toLowerCase();this.protocol=h,s=s.substr(u.length)}if(r||u||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===s.substr(0,2);!l||u&&H[u]||(s=s.substr(2),this.slashes=!0)}if(!H[u]&&(l||u&&!W[u])){for(var c,f,p=-1,d=0;d<U.length;d++){-1!==(y=s.indexOf(U[d]))&&(-1===p||y<p)&&(p=y)}-1!==(f=-1===p?s.lastIndexOf("@"):s.lastIndexOf("@",p))&&(c=s.slice(0,f),s=s.slice(f+1),this.auth=decodeURIComponent(c)),p=-1;for(d=0;d<B.length;d++){var y;-1!==(y=s.indexOf(B[d]))&&(-1===p||y<p)&&(p=y)}-1===p&&(p=s.length),this.host=s.slice(0,p),s=s.slice(p),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var v=this.hostname.split(/\./),m=(d=0,v.length);d<m;d++){var b=v[d];if(b&&!b.match(D)){for(var w="",_=0,S=b.length;_<S;_++)127<b.charCodeAt(_)?w+="x":w+=b[_];if(!w.match(D)){var E=v.slice(0,d),T=v.slice(d+1),O=b.match(F);O&&(E.push(O[1]),T.unshift(O[2])),T.length&&(s="/"+T.join(".")+s),this.hostname=E.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=I.toASCII(this.hostname));var C=this.port?":"+this.port:"",k=this.hostname||"";this.host=k+C,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!V[h])for(d=0,m=M.length;d<m;d++){var A=M[d];if(-1!==s.indexOf(A)){var R=encodeURIComponent(A);R===A&&(R=escape(A)),s=s.split(A).join(R)}}var x=s.indexOf("#");-1!==x&&(this.hash=s.substr(x),s=s.slice(0,x));var L=s.indexOf("?");if(-1!==L?(this.search=s.substr(L),this.query=s.substr(L+1),e&&(this.query=G.parse(this.query)),s=s.slice(0,L)):e&&(this.search="",this.query={}),s&&(this.pathname=s),W[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){C=this.pathname||"";var j=this.search||"";this.path=C+j}return this.href=this.format(),this},k.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&N.isObject(this.query)&&Object.keys(this.query).length&&(o=G.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||W[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),e+i+(r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+n},k.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},k.prototype.resolveObject=function(t){if(N.isString(t)){var e=new k;e.parse(t,!1,!0),t=e}for(var r=new k,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),a=0;a<s.length;a++){var u=s[a];"protocol"!==u&&(r[u]=t[u])}return W[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!W[t.protocol]){for(var h=Object.keys(t),l=0;l<h.length;l++){var c=h[l];r[c]=t[c]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||H[t.protocol])r.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var p=r.pathname||"",d=r.search||"";r.path=p+d}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var y=r.pathname&&"/"===r.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),v=g||y||r.host&&t.pathname,m=v,b=r.pathname&&r.pathname.split("/")||[],w=(f=t.pathname&&t.pathname.split("/")||[],r.protocol&&!W[r.protocol]);if(w&&(r.hostname="",r.port=null,r.host&&(""===b[0]?b[0]=r.host:b.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),v=v&&(""===f[0]||""===b[0])),g)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,b=f;else if(f.length)b||(b=[]),b.pop(),b=b.concat(f),r.search=t.search,r.query=t.query;else if(!N.isNullOrUndefined(t.search)){if(w)r.hostname=r.host=b.shift(),(O=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=O.shift(),r.host=r.hostname=O.shift());return r.search=t.search,r.query=t.query,N.isNull(r.pathname)&&N.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!b.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var _=b.slice(-1)[0],S=(r.host||t.host||1<b.length)&&("."===_||".."===_)||""===_,E=0,T=b.length;0<=T;T--)"."===(_=b[T])?b.splice(T,1):".."===_?(b.splice(T,1),E++):E&&(b.splice(T,1),E--);if(!v&&!m)for(;E--;E)b.unshift("..");!v||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),S&&"/"!==b.join("/").substr(-1)&&b.push("");var O,C=""===b[0]||b[0]&&"/"===b[0].charAt(0);w&&(r.hostname=r.host=C?"":b.length?b.shift():"",(O=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=O.shift(),r.host=r.hostname=O.shift()));return(v=v||r.host&&b.length)&&!C&&b.unshift(""),b.length?r.pathname=b.join("/"):(r.pathname=null,r.path=null),N.isNull(r.pathname)&&N.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},k.prototype.parseHost=function(){var t=this.host,e=n.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":64,punycode:36,querystring:39}],64:[function(t,e,r){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],65:[function(t,e,r){(function(r){function n(t){try{if(!r.localStorage)return!1}catch(t){return!1}var e=r.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}e.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],66:[function(t,e,r){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)i.call(r,n)&&(t[n]=r[n])}return t};var i=Object.prototype.hasOwnProperty},{}]},{},[2])(2)})}(window.intermine);